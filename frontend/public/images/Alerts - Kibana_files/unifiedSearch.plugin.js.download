!function(e){function t(t){for(var n,r,o=t[0],i=t[1],s=0,l=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);l.length;)l.shift()()}var n={},a={4:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=o);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+"unifiedSearch.chunk."+e+".js"}(e);var u=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",u.name="ChunkLoadError",u.type=r,u.request=o,n[1](u)}a[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var o=window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=i;r(r.s=27)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(23)(2)},function(e,t,n){"use strict";let a;n.d(t,"a",(function(){return a})),function(e){e.Field="field",e.Value="value",e.Operator="operator",e.Conjunction="conjunction",e.RecentSearch="recentSearch"}(a||(a={}))},function(e,t,n){e.exports=n(23)(3)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var a=n(12);const[r,o]=Object(a.createGetterSetter)("IndexPatterns"),[i,s]=Object(a.createGetterSetter)("Theme"),[u,l]=Object(a.createGetterSetter)("Overlays")},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return b}));var a=n(1),r=n.n(a),o=n(0);const i=()=>Object(o.jsx)("div",null),s=r.a.lazy((()=>Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,42)))),u=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(i,null)},Object(o.jsx)(s,e)),l=r.a.lazy((()=>Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,39)))),c=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(i,null)},Object(o.jsx)(l,e)),d=r.a.lazy((()=>Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,41)))),p=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(i,null)},Object(o.jsx)(d,e)),g=r.a.lazy((()=>Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,36)))),b=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(i,null)},Object(o.jsx)(g,e))},function(e,t,n){n.r(t);var a=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(8),r=n.n(a),o=n(1),i=n.n(o),s=n(2),u=n(5),l=n(0),c={name:"18g08sj",styles:"padding-bottom:0"};function d({dataViewsList:e,onChangeDataView:t,isTextBasedLangSelected:n,currentDataViewId:a,selectableProps:o,searchListInputId:d}){return Object(l.jsx)(s.EuiSelectable,r()({},o,{"data-test-subj":"indexPattern-switcher",searchable:!0,singleSelection:"always",options:null==e?void 0:e.map((({title:e,id:t,name:r})=>({key:t,label:r||e,value:t,checked:t!==a||Boolean(n)?void 0:"on"}))),onChange:e=>{const n=e.find((({checked:e})=>e));t(n.value)},searchProps:{id:d,compressed:!0,placeholder:u.i18n.translate("unifiedSearch.query.queryBar.indexPattern.findDataView",{defaultMessage:"Find a data view"}),"data-test-subj":"indexPattern-switcher--input",...o?o.searchProps:void 0}}),((e,t)=>Object(l.jsx)(i.a.Fragment,null,Object(l.jsx)(s.EuiPanel,{css:c,color:"transparent",paddingSize:"s"},t),e)))}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,n){"use strict";var a,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function i(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},a=[],r=0;r<e.length;r++){var s=e[r],u=t.base?s[0]+t.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var d=i(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:c,updater:f(p,t),references:1}),a.push(c)}return a}function u(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var o=n.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var o=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function p(e,t,n){var a=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,b=0;function f(e,t){var n,a,r;if(t.singleton){var o=b++;n=g||(g=u(t)),a=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else n=u(t),a=p.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var r=i(n[a]);o[r].references--}for(var u=s(e,t),l=0;l<n.length;l++){var c=i(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a,r,o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var s=(n=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(r," */")),u=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);a&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";n.d(t,"a",(function(){return autocomplete_service_AutocompleteService}));var a=n(6),r=n.n(a),o=n(19),i=n.n(o),s=n(20),u=n.n(s),l=n(4),c=n(17);const d=()=>Promise.resolve([]);var p=n(26),g=n(14);let b;!function(e){e.CALL="autocomplete:call",e.REQUEST="autocomplete:req",e.RESULT="autocomplete:res",e.ERROR="autocomplete:err"}(b||(b={}));var f=n(13),h=n(7);const m=(e,t)=>{const n=["raw","keyword"];return n.map((t=>`${e.name}.${t}`)).includes(t.name)?1:n.map((e=>`${t.name}.${e}`)).includes(e.name)?-1:e.name.localeCompare(t.name)},y=e=>{const t=e.getStartServices().then((([e,t,n])=>n.autocomplete));return async({indexPatterns:e,boolFilter:n,useTimeRange:a,signal:r,method:o},{start:i,end:s,prefix:u,suffix:c,fieldName:d,nestedPath:p})=>{const g=p?`${p}.${d}`:d,b=[];e.forEach((e=>{e.fields.filter((e=>e.name===g)).forEach((t=>b.push([e,t])))}));const f=`${u}${c}`.trim(),{getValueSuggestions:m}=await t,y=await Promise.all(b.map((([e,t])=>m({indexPattern:e,field:t,query:f,boolFilter:n,useTimeRange:a,signal:r,method:o}).then((e=>{const t=e.map((e=>{return"string"==typeof e?`"${t=e,t.replace(/[\\"]/g,"\\$&")}"`:`${e}`;var t}));return((e,t,n,a)=>a.filter((e=>e.toLowerCase().includes(n.toLowerCase()))).map((n=>({type:h.a.Value,text:`${n} `,start:e,end:t}))))(i,s,f,t)})))));return Object(l.flatten)(y)}};n(1);var x=n(3),_=n(0);const S=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.equalOperatorDescription.equalsText",defaultMessage:"equals",description:"Part of unifiedSearch.kueryAutocomplete.equalOperatorDescription. Full text: 'equals some value'"}),k=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText",defaultMessage:"less than or equal to",description:"Part of unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription. Full text: 'is less than or equal to some value'"}),v=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText",defaultMessage:"greater than or equal to",description:"Part of unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription. Full text: 'is greater than or equal to some value'"}),j=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOperatorDescription.lessThanText",defaultMessage:"less than",description:"Part of unifiedSearch.kueryAutocomplete.lessThanOperatorDescription. Full text: 'is less than some value'"}),T=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText",defaultMessage:"greater than",description:"Part of unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription. Full text: 'is greater than some value'"}),O=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.existOperatorDescription.existsText",defaultMessage:"exists",description:"Part of unifiedSearch.kueryAutocomplete.existOperatorDescription. Full text: 'exists in any form'"}),w={":":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.equalOperatorDescription",defaultMessage:"{equals} some value",values:{equals:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},S)},description:"Full text: 'equals some value'. See 'unifiedSearch.kueryAutocomplete.equalOperatorDescription.equalsText' for 'equals' part."}),fieldTypes:["string","number","number_range","date","date_range","ip","ip_range","geo_point","geo_shape","boolean"]},"<=":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription",defaultMessage:"is {lessThanOrEqualTo} some value",values:{lessThanOrEqualTo:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},k)},description:"Full text: 'is less than or equal to some value'. See 'unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText' for 'less than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">=":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription",defaultMessage:"is {greaterThanOrEqualTo} some value",values:{greaterThanOrEqualTo:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},v)},description:"Full text: 'is greater than or equal to some value'. See 'unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText' for 'greater than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},"<":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOperatorDescription",defaultMessage:"is {lessThan} some value",values:{lessThan:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},j)},description:"Full text: 'is less than some value'. See 'unifiedSearch.kueryAutocomplete.lessThanOperatorDescription.lessThanText' for 'less than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription",defaultMessage:"is {greaterThan} some value",values:{greaterThan:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},T)},description:"Full text: 'is greater than some value'. See 'unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText' for 'greater than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},": *":{description:Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.existOperatorDescription",defaultMessage:"{exists} in any form",values:{exists:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},O)},description:"Full text: 'exists in any form'. See 'unifiedSearch.kueryAutocomplete.existOperatorDescription.existsText' for 'exists' part."}),fieldTypes:void 0}},I=e=>w[e],E=e=>Object(_.jsx)("p",null,I(e).description),P=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.andOperatorDescription.bothArgumentsText",defaultMessage:"both arguments",description:"Part of unifiedSearch.kueryAutocomplete.andOperatorDescription. Full text: 'Requires both arguments to be true'"}),q=Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText",defaultMessage:"one or more arguments",description:"Part of unifiedSearch.kueryAutocomplete.orOperatorDescription. Full text: 'Requires one or more arguments to be true'"}),M={and:Object(_.jsx)("p",null,Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.andOperatorDescription",defaultMessage:"Requires {bothArguments} to be true",values:{bothArguments:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},P)},description:"Full text: ' Requires both arguments to be true'. See 'unifiedSearch.kueryAutocomplete.andOperatorDescription.bothArgumentsText' for 'both arguments' part."})),or:Object(_.jsx)("p",null,Object(_.jsx)(x.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.orOperatorDescription",defaultMessage:"Requires {oneOrMoreArguments} to be true",values:{oneOrMoreArguments:Object(_.jsx)("span",{className:"kbnSuggestionItem__callout"},q)},description:"Full text: 'Requires one or more arguments to be true'. See 'unifiedSearch.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText' for 'one or more arguments' part."}))};class autocomplete_service_AutocompleteService{constructor(e){r()(this,"autocompleteConfig",void 0),r()(this,"querySuggestionProviders",new Map),r()(this,"getValueSuggestions",void 0),r()(this,"getQuerySuggestions",(e=>{const{language:t}=e,n=this.querySuggestionProviders.get(t);if(n)return n(e)})),r()(this,"hasQuerySuggestions",(e=>this.querySuggestionProviders.has(e))),this.initializerContext=e;const{autocomplete:t}=e.config.get();this.autocompleteConfig=t}setup(e,{timefilter:t,usageCollection:a}){const{autocomplete:r}=this.initializerContext.config.get(),{terminateAfter:o,timeout:s}=r.valueSuggestions,x=((e,t)=>{const n=async()=>{const[{application:t}]=await e();return t.currentAppId$.pipe(Object(p.first)()).toPromise()};return{trackCall:async()=>{const e=await n();return null==t?void 0:t.reportUiCounter(e,g.METRIC_TYPE.LOADED,b.CALL)},trackRequest:async()=>{const e=await n();return null==t?void 0:t.reportUiCounter(e,g.METRIC_TYPE.LOADED,b.REQUEST)},trackResult:async()=>{const e=await n();return null==t?void 0:t.reportUiCounter(e,g.METRIC_TYPE.LOADED,b.RESULT)},trackError:async()=>{const e=await n();return null==t?void 0:t.reportUiCounter(e,g.METRIC_TYPE.LOADED,b.ERROR)}}})(e.getStartServices,a);return this.getValueSuggestions=this.autocompleteConfig.valueSuggestions.enabled?((e,{timefilter:t,usageCollector:a})=>{function r(e,t,n,a){return[Math.floor(Date.now()/1e3/60),n,e,t.name,JSON.stringify(a)].join("|")}const o=Object(l.memoize)(((t,n,r,o=[],i,s=e.uiSettings.get(c.UI_SETTINGS.AUTOCOMPLETE_VALUE_SUGGESTION_METHOD))=>{var u;return null==a||a.trackRequest(),e.http.fetch(`/api/kibana/suggestions/values/${t}`,{method:"POST",body:JSON.stringify({query:r,field:n.name,fieldMeta:null==n||null===(u=n.toSpec)||void 0===u?void 0:u.call(n),filters:o,method:s}),signal:i}).then((e=>(null==a||a.trackResult(),e)))}),r);return async({indexPattern:i,field:s,query:l,useTimeRange:d,boolFilter:p,signal:g,method:b})=>{var f,h;const m=e.uiSettings.get(c.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES);d=null!==(f=d)&&void 0!==f?f:e.uiSettings.get(c.UI_SETTINGS.AUTOCOMPLETE_USE_TIMERANGE);const{title:y}=i,x="string"===s.type&&(null===(h=s.esTypes)||void 0===h?void 0:h.includes("version"));if("boolean"===s.type)return[!0,!1];if(!m||!s.aggregatable||"string"!==s.type||x)return[];const _=d?(({timefilter:e},t)=>{const n=e.getTime(),a={from:u.a.parse(n.from).startOf("minute").toISOString(),to:u.a.parse(n.to).endOf("minute").toISOString()};return e.createFilter(t,a)})(t,i):void 0,{buildQueryFromFilters:S}=await n.e(0).then(n.bind(null,44)),k=[...p||[],..._?S([_],i).filter:[]];try{return null==a||a.trackCall(),await o(y,s,l,k,g,b)}catch(e){return null!=g&&g.aborted||null==a||a.trackError(),o.cache.delete(r(y,s,l,k)),[]}}})(e,{timefilter:t,usageCollector:x}):d,this.autocompleteConfig.querySuggestions.enabled&&this.querySuggestionProviders.set("kuery",(e=>{const t={field:async({indexPatterns:e},{start:t,end:a,prefix:r,suffix:o,nestedPath:i=""})=>{const s=Object(l.flatten)(e.map((e=>e.fields.filter(f.indexPatterns.isFilterable)))),u=`${r}${o}`.trim().toLowerCase(),c=function(e,t,n){if(!t)return e;const a=(""+t).toLowerCase(),r=Object(l.partition)(e,(e=>(""+e.name).toLowerCase().startsWith(a)));return[...r[0],...r[1]]}(s.filter((e=>{const t=f.indexPatterns.getFieldSubtypeNested(e);return(!i||i&&(null==t?void 0:t.nested.path.includes(i)))&&e.name.toLowerCase().includes(u)})).sort(m),u),{escapeKuery:d}=await n.e(0).then(n.bind(null,44)),p=c.map((e=>{const n=e.subType&&e.subType.nested?e.subType.nested.path.slice(i?i.length+1:0):"",r=e.subType&&e.subType.nested&&n.length>0?`${d(n)}:{ ${d(e.name.slice(e.subType.nested.path.length+1))}  }`:`${d(e.name.slice(i?i.length+1:0))} `,o=e.subType&&e.subType.nested&&n.length>0?r.length-2:r.length;return{type:h.a.Field,text:r,start:t,end:a,cursorIndex:o,field:e}}));return Promise.resolve(p)},value:y(e),operator:({indexPatterns:e},{end:t,fieldName:n,nestedPath:a})=>{const r=Object(l.flatten)(e.map((e=>e.fields.slice()))),o=a?`${a}.${n}`:n,i=r.filter((e=>e.name===o)).map((e=>Object.keys(w).filter((t=>{const{fieldTypes:n}=I(t);return!n||n.includes(e.type)})).map((e=>({type:h.a.Operator,text:e+" ",description:E(e),start:t,end:t})))));return Promise.resolve(Object(l.flatten)(i))},conjunction:(e,{text:t,end:n})=>{let a=[];return t.endsWith(" ")&&(a=Object.keys(M).map((e=>({type:h.a.Conjunction,text:`${e} `,description:M[e],start:n,end:n})))),Promise.resolve(a)}};return async e=>{const{query:a,selectionStart:r,selectionEnd:o}=e,i=`${a.substr(0,r)}@kuery-cursor@${a.substr(o)}`;return Promise.all(await(async(e,a)=>{try{const{fromKueryExpression:r}=await n.e(0).then(n.bind(null,44)),o=r(e,{cursorSymbol:"@kuery-cursor@",parseCursor:!0});return o.suggestionTypes.map((e=>t[e](a,o)))}catch(e){return[]}})(i,e)).then((e=>{return t=Object(l.flatten)(e),Object(l.uniqBy)(t,(({type:e,text:t,start:n,end:a})=>[e,t,n,a].join("|")));var t}))}})(e)),{getQuerySuggestions:this.getQuerySuggestions,getAutocompleteSettings:()=>({terminateAfter:i.a.duration(o).asMilliseconds(),timeout:i.a.duration(s).asMilliseconds()})}}start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}clearProviders(){this.querySuggestionProviders.clear()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(1),r=n.n(a),o=n(8),i=n.n(o),s=n(5),u=n(0),l=n(2),c=n(10),d=n(18);const p="data.textLangTransitionModal",g=()=>Object(u.jsx)("div",null),b=r.a.lazy((()=>n.e(13).then(n.bind(null,134)))),f=e=>Object(u.jsx)(r.a.Suspense,{fallback:Object(u.jsx)(g,null)},Object(u.jsx)(b,e)),h=r.a.lazy((()=>n.e(12).then(n.bind(null,135)))),m=e=>Object(u.jsx)(r.a.Suspense,{fallback:Object(u.jsx)(g,null)},Object(u.jsx)(h,e));function y({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:n,onChangeDataView:o,onAddField:g,onDataViewCreated:b,trigger:h,selectableProps:y,textBasedLanguages:x,onSaveTextLanguageQuery:_,onTextLangQuerySubmit:S,textBasedLanguage:k,isDisabled:v}){const{euiTheme:j}=Object(l.useEuiTheme)(),[T,O]=Object(a.useState)(!1),[w,I]=Object(a.useState)([]),[E,P]=Object(a.useState)(""),[q,M]=Object(a.useState)(Boolean(k)),[C,D]=Object(a.useState)(!1),[F,R]=Object(a.useState)(t),A=Object(c.useKibana)(),{application:L,data:B,storage:Q}=A.services,V=(({fullWidth:e})=>({trigger:{maxWidth:e?void 0:280},popoverContent:{width:280}}))({fullWidth:h.fullWidth}),[N,U]=Object(a.useState)((()=>Boolean(Q.get(p)))),$=Object(l.useGeneratedHtmlId)({prefix:"dataviewPickerListSearchInput"});let z;Object(a.useEffect)((()=>{(async()=>{const e=await B.dataViews.getIdsWithTitle();null!=n&&n.length&&n.forEach((t=>{t.id&&e.push({title:t.title,name:t.name,id:t.id})})),I(e)})()}),[B,t,n]),Object(a.useEffect)((()=>{h.label&&P(k?k.toUpperCase():h.label)}),[k,h.label]),Object(a.useEffect)((()=>{Boolean(k)!==q&&M(Boolean(k))}),[q,k]);const G=Object(a.useCallback)((()=>{Q.set(p,!0),U(!0)}),[Q]),K=Object(a.useCallback)((e=>{D(!1),M(!1),null==S||S({language:"kql",query:""}),F&&o(F),P(h.label),e&&G()}),[o,S,G,F,h.label]),W=Object(a.useCallback)(((e,t)=>{Boolean(t)?(D(!1),null==_||_({onSave:()=>{K(e)},onCancel:()=>{D(!1)}})):K(e)}),[K,_]);return C&&!N&&(z=Object(u.jsx)(f,{closeModal:W,setIsTextLangTransitionModalVisible:D})),Object(u.jsx)(r.a.Fragment,null,Object(u.jsx)(l.EuiPopover,{panelClassName:"changeDataViewPopover",button:function(){const{label:t,title:n,"data-test-subj":a,fullWidth:r,...o}=h;return Object(u.jsx)(l.EuiButton,i()({css:V.trigger,"data-test-subj":a,onClick:()=>{O(!T)},color:e?"danger":"primary",iconSide:"right",iconType:"arrowDown",title:E,fullWidth:r,disabled:v},o),E)}(),panelProps:{"data-test-subj":"changeDataViewPopover"},isOpen:T,closePopover:()=>O(!1),panelPaddingSize:"none",initialFocus:q?void 0:`#${$}`,display:"block",buffer:8},Object(u.jsx)("div",{css:V.popoverContent},Object(u.jsx)(l.EuiContextMenuPanel,{size:"s",items:(()=>{const e=[];return g&&!q&&e.push(Object(u.jsx)(l.EuiContextMenuItem,{key:"add",icon:"indexOpen","data-test-subj":"indexPattern-add-field",onClick:()=>{O(!1),g()}},s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addFieldButton",{defaultMessage:"Add a field to this data view"})),Object(u.jsx)(l.EuiContextMenuItem,{key:"manage",icon:"indexSettings","data-test-subj":"indexPattern-manage-field",onClick:()=>{O(!1),L.navigateToApp("management",{path:`/kibana/indexPatterns/patterns/${t}`})}},s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.manageFieldButton",{defaultMessage:"Manage this data view"})),Object(u.jsx)(l.EuiHorizontalRule,{margin:"none"})),e.push(Object(u.jsx)(r.a.Fragment,null,b&&Object(u.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1,css:Object(u.css)("margin:",j.size.s,";margin-bottom:0;","")},Object(u.jsx)(l.EuiFlexItem,{grow:!1},Object(u.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(u.jsx)(l.EuiFlexItem,{grow:!1},Boolean(q)?Object(u.jsx)(l.EuiToolTip,{position:"top",content:s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.textBasedLangSwitchWarning",{defaultMessage:"Switching data views removes the current SQL query. Save this search to ensure you don't lose work."})},Object(u.jsx)(l.EuiIcon,{type:"alert",color:"warning","data-test-subj":"textBasedLang-warning"})):null),Object(u.jsx)(l.EuiFlexItem,{grow:!1},Object(u.jsx)(l.EuiText,{size:"s"},Object(u.jsx)("h5",null,s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.dataViewsLabel",{defaultMessage:"Data views"})))))),Object(u.jsx)(l.EuiFlexItem,{grow:!1},Object(u.jsx)(l.EuiButtonEmpty,{onClick:()=>{O(!1),b()},size:"xs",iconType:"plusInCircleFilled",iconSide:"left","data-test-subj":"dataview-create-new"},s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addNewDataView",{defaultMessage:"Create a data view"})))),Object(u.jsx)(d.a,{dataViewsList:w,onChangeDataView:async e=>{const t=await B.dataViews.get(e);await B.dataViews.refreshFields(t),R(e),O(!1),q&&!N?D(!0):q&&N?(M(!1),null==S||S({language:"kql",query:""}),o(e),P(h.label)):o(e)},currentDataViewId:t,selectableProps:y,searchListInputId:$,isTextBasedLangSelected:q}))),null!=x&&x.length&&e.push(Object(u.jsx)(l.EuiHorizontalRule,{margin:"none"}),Object(u.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween","data-test-subj":"select-text-based-language-panel",css:Object(u.css)("margin:",j.size.s,";margin-bottom:0;","")},Object(u.jsx)(l.EuiFlexItem,{grow:!1},Object(u.jsx)(l.EuiText,{size:"s"},Object(u.jsx)("h5",null,s.i18n.translate("unifiedSearch.query.queryBar.indexPattern.textBasedLanguagesLabel",{defaultMessage:"Text-based query languages"}))))),Object(u.jsx)(m,{textBasedLanguages:x,selectedOption:E,onChange:e=>{P(e),O(!1),M(!0),null==S||S({sql:`SELECT * FROM "${h.title}"`})}})),e})()}))),z)}let x;!function(e){e.SQL="SQL",e.ESQL="ESQL"}(x||(x={}));const _=({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:n,onChangeDataView:a,onAddField:r,onDataViewCreated:o,trigger:i,selectableProps:s,textBasedLanguages:l,onSaveTextLanguageQuery:c,onTextLangQuerySubmit:d,textBasedLanguage:p,isDisabled:g})=>Object(u.jsx)(y,{isMissingCurrent:e,currentDataViewId:t,onChangeDataView:a,onAddField:r,onDataViewCreated:o,trigger:i,adHocDataViews:n,selectableProps:s,textBasedLanguages:l,onSaveTextLanguageQuery:c,onTextLangQuerySubmit:d,textBasedLanguage:p,isDisabled:g})},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t,n){n(28),__kbnBundles__.define("plugin/unifiedSearch/public",n,34)},function(e,t,n){n.p=window.__kbnPublicPath__.unifiedSearch},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(30);case"v8light":return n(32)}},function(e,t,n){var a=n(21),r=n(31);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(22)(!1)).push([e.i,".kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{border-top-left-radius:6px;border-top-right-radius:6px;box-shadow:0 0 .8px #00000026,0 0 2px #0000001a,0 0 5px #0000001a,0 0 17px rgba(0,0,0,.075);-webkit-clip-path:polygon(-50px -50px,calc(100% + 50px) -50px,calc(100% + 50px) 100%,-50px 100%);clip-path:polygon(-50px -50px,calc(100% + 50px) -50px,calc(100% + 50px) 100%,-50px 100%)}.kbnTypeahead__popover--bottom{border-bottom-left-radius:6px;border-bottom-right-radius:6px;box-shadow:0 1px 5px #00000040,0 3.6px 13px rgba(0,0,0,.175),0 8.4px 23px #00000026,0 23px 35px rgba(0,0,0,.125);-webkit-clip-path:polygon(-50px 1px,calc(100% + 50px) 1px,calc(100% + 50px) calc(100% + 50px),-50px calc(100% + 50px));clip-path:polygon(-50px 1px,calc(100% + 50px) 1px,calc(100% + 50px) calc(100% + 50px),-50px calc(100% + 50px))}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{background-color:#1d1e24;border:1px solid #343741;color:#dfe5ef;max-height:inherit;overflow-y:auto;position:relative;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:100%;z-index:2000}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{height:16px;width:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:#0000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{border-bottom:none;font-size:12px;height:32px;line-height:normal;padding:0;vertical-align:middle;white-space:nowrap}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#25262e}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#1d1e24}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text,.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#61542d}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#325956}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#164160}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#3a2d4a}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#212429}.kbnSuggestionItem{align-items:center;display:inline-flex;font-size:12px;white-space:nowrap;width:100%}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#7a6a39;color:#f6edc6}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#3f6f6c;color:#c0eeeb}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#1b5178;color:#87c7f6}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#49385c;color:#baa5d2}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#2a2d33;color:#93979f}.kbnSuggestionItem__description,.kbnSuggestionItem__text,.kbnSuggestionItem__type{padding-right:16px}.kbnSuggestionItem__type{align-items:center;display:flex;flex-basis:auto;flex-direction:column;flex-grow:0;flex-shrink:0;height:32px;justify-content:center;overflow:hidden;padding:4px;text-align:center;width:32px}.kbnSuggestionItem__text{color:#dfe5ef;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;min-width:250px;overflow:hidden;padding-left:8px;text-overflow:ellipsis}.kbnSuggestionItem__description{color:#98a2b3;flex-shrink:1}.kbnSuggestionItem__description,.kbnSuggestionItem__description>p{overflow:hidden;text-overflow:ellipsis}.kbnSuggestionItem__description:empty{width:0}.kbnSuggestionItem__callout{background:#25262e;color:#fff;display:inline-block;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;padding:0 4px}",""]),e.exports=t},function(e,t,n){var a=n(21),r=n(33);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(22)(!1)).push([e.i,".kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{border-top-left-radius:6px;border-top-right-radius:6px;box-shadow:0 0 .8px #0000000f,0 0 2px #0000000a,0 0 5px #0000000a,0 0 17px #00000008;-webkit-clip-path:polygon(-50px -50px,calc(100% + 50px) -50px,calc(100% + 50px) 100%,-50px 100%);clip-path:polygon(-50px -50px,calc(100% + 50px) -50px,calc(100% + 50px) 100%,-50px 100%)}.kbnTypeahead__popover--bottom{border-bottom-left-radius:6px;border-bottom-right-radius:6px;box-shadow:0 1px 5px #0000001a,0 3.6px 13px #00000012,0 8.4px 23px #0000000f,0 23px 35px #0000000d;-webkit-clip-path:polygon(-50px 1px,calc(100% + 50px) 1px,calc(100% + 50px) calc(100% + 50px),-50px calc(100% + 50px));clip-path:polygon(-50px 1px,calc(100% + 50px) 1px,calc(100% + 50px) calc(100% + 50px),-50px calc(100% + 50px))}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{background-color:#fff;border:1px solid #d3dae6;color:#343741;max-height:inherit;overflow-y:auto;position:relative;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:100%;z-index:2000}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{height:16px;width:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:#0000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{border-bottom:none;font-size:12px;height:32px;line-height:normal;padding:0;vertical-align:middle;white-space:nowrap}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#f5f7fa}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text,.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff3d0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#ccf2f0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#cce4f5}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#e9e2f1}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#eaecf0}.kbnSuggestionItem{align-items:center;display:inline-flex;font-size:12px;white-space:nowrap;width:100%}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff9e8;color:#8a6a0a}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#e6f9f7;color:#007e77}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#e6f1fa;color:#006bb8}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#f4f1f8;color:#7c609e}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#f5f6f7;color:#6a717d}.kbnSuggestionItem__description,.kbnSuggestionItem__text,.kbnSuggestionItem__type{padding-right:16px}.kbnSuggestionItem__type{align-items:center;display:flex;flex-basis:auto;flex-direction:column;flex-grow:0;flex-shrink:0;height:32px;justify-content:center;overflow:hidden;padding:4px;text-align:center;width:32px}.kbnSuggestionItem__text{color:#343741;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;min-width:250px;overflow:hidden;padding-left:8px;text-overflow:ellipsis}.kbnSuggestionItem__description{color:#69707d;flex-shrink:1}.kbnSuggestionItem__description,.kbnSuggestionItem__description>p{overflow:hidden;text-overflow:ellipsis}.kbnSuggestionItem__description:empty{width:0}.kbnSuggestionItem__callout{background:#f5f7fa;color:#000;display:inline-block;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;padding:0 4px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryStringInput",(function(){return u})),n.d(t,"SearchBar",(function(){return T})),n.d(t,"FilterLabel",(function(){return O.d})),n.d(t,"FilterItem",(function(){return O.b})),n.d(t,"FilterItems",(function(){return O.c})),n.d(t,"DataViewsList",(function(){return w.a})),n.d(t,"DataViewPicker",(function(){return I.a})),n.d(t,"ACTION_GLOBAL_APPLY_FILTER",(function(){return C})),n.d(t,"UPDATE_FILTER_REFERENCES_ACTION",(function(){return R})),n.d(t,"UPDATE_FILTER_REFERENCES_TRIGGER",(function(){return A})),n.d(t,"QuerySuggestionTypes",(function(){return B.a})),n.d(t,"plugin",(function(){return W}));var a=n(1),r=n.n(a),o=n(0);const i=()=>Object(o.jsx)("div",null),s=r.a.lazy((()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,133)))),u=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(i,null)},Object(o.jsx)(s,e));var l=n(8),c=n.n(l),d=n(4),p=n.n(d),g=n(10),b=n(11),f=n(5);const h=(e,t)=>{const{timefilter:{timefilter:n},filterManager:a,queryString:r}=e;t.attributes.timefilter&&(n.setTime({from:t.attributes.timefilter.from,to:t.attributes.timefilter.to}),t.attributes.timefilter.refreshInterval&&n.setRefreshInterval(t.attributes.timefilter.refreshInterval)),r.setQuery(t.attributes.query);const o=t.attributes.filters||[],i=a.getGlobalFilters();a.setFilters([...i,...o])},m=e=>{e.filterManager.removeAll(),e.queryString.clearQuery()},y=e=>{const{timefilter:t}=e.timefilter;return e=>{t.setRefreshInterval({value:e.refreshInterval,pause:e.isPaused})}},x=(e,t,n)=>{if(!e.useDefaultBehaviors)return e.onQuerySubmit;const{timefilter:a}=t.timefilter;return r=>{p.a.isEqual(a.getTime(),r.dateRange)&&p.a.isEqual(r.query,n)?e.onQuerySubmit&&e.onQuerySubmit({dateRange:a.getTime(),query:n},!1):(a.setTime(r.dateRange),r.query?t.queryString.setQuery(r.query):t.queryString.clearQuery())}},_=(e,t)=>e.useDefaultBehaviors?()=>{t(),e.onSavedQueryIdChange&&e.onSavedQueryIdChange()}:e.onClearSavedQuery,S=(e,t)=>e.useDefaultBehaviors?n=>{t(n),e.onSavedQueryIdChange&&e.onSavedQueryIdChange(n.id)}:e.onSavedQueryUpdated;function k({core:e,storage:t,data:n,usageCollection:r,isScreenshotMode:i=!1,unifiedSearch:s}){return u=>{const{useDefaultBehaviors:l}=u,d=Object(a.useRef)(u.onQuerySubmit),{filters:p}=(e=>{const[t,n]=Object(a.useState)(e.filters||e.filterManager.getFilters());return Object(a.useEffect)((()=>{const t=new b.Subscription;return t.add(e.filterManager.getUpdates$().subscribe({next:()=>{const t=e.filterManager.getFilters();n(t)}})),()=>{t.unsubscribe()}}),[e.filterManager]),{filters:t}})({filters:u.filters,filterManager:n.query.filterManager}),{query:k}=(e=>{const[t,n]=Object(a.useState)(e.query||e.queryStringManager.getQuery());Object(a.useEffect)((()=>{const t=new b.Subscription;return t.add(e.queryStringManager.getUpdates$().subscribe({next:()=>{const t=e.queryStringManager.getQuery();n(t)}})),()=>{t.unsubscribe()}}),[e.queryStringManager]);const r=(o=t,Boolean(o&&"query"in o));var o;return{query:Object(a.useMemo)((()=>r?{language:t.language,query:t.query}:t),[r,t])}})({query:u.query,queryStringManager:n.query.queryString}),{timeRange:v,refreshInterval:j}=(e=>{const t={from:e.dateRangeFrom||e.timefilter.getTime().from,to:e.dateRangeTo||e.timefilter.getTime().to},n={value:e.refreshInterval||e.timefilter.getRefreshInterval().value,pause:e.isRefreshPaused||e.timefilter.getRefreshInterval().pause},[r,o]=Object(a.useState)(t),[i,s]=Object(a.useState)(n);return Object(a.useEffect)((()=>{const t=new b.Subscription;return t.add(e.timefilter.getRefreshIntervalUpdate$().subscribe({next:()=>{const t=e.timefilter.getRefreshInterval();s(t)}})),t.add(e.timefilter.getTimeUpdate$().subscribe({next:()=>{o(e.timefilter.getTime())}})),()=>{t.unsubscribe()}}),[e.timefilter]),{refreshInterval:i,timeRange:r}})({dateRangeFrom:u.dateRangeFrom,dateRangeTo:u.dateRangeTo,refreshInterval:u.refreshInterval,isRefreshPaused:u.isRefreshPaused,timefilter:n.query.timefilter.timefilter}),{savedQuery:O,setSavedQuery:w,clearSavedQuery:I}=(e=>{const[t,n]=Object(a.useState)();return Object(a.useEffect)((()=>{e.savedQueryId?(async t=>{try{const a=await e.queryService.savedQueries.getSavedQuery(t);a&&a.id===t&&(n(a),h(e.queryService,a))}catch(a){n(void 0),m(e.queryService),e.notifications.toasts.addWarning({title:f.i18n.translate("unifiedSearch.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:t}}),text:`${a.message}`})}})(e.savedQueryId):n(void 0)}),[e.notifications.toasts,e.queryService,e.queryService.savedQueries,e.savedQueryId]),{savedQuery:t,setSavedQuery:t=>{n(t),h(e.queryService,t)},clearSavedQuery:()=>{n(void 0),m(e.queryService)}}})({queryService:n.query,savedQueryId:u.savedQueryId,notifications:e.notifications});return Object(a.useEffect)((()=>{l&&d.current&&d.current({dateRange:v,query:k},!0)}),[k,v,l]),Object(o.jsx)(g.KibanaContextProvider,{services:{appName:u.appName,data:n,storage:t,usageCollection:r,unifiedSearch:s,...e}},Object(o.jsx)(T,c()({showAutoRefreshOnly:u.showAutoRefreshOnly,showDatePicker:u.showDatePicker,showFilterBar:u.showFilterBar,showQueryBar:u.showQueryBar,showQueryInput:u.showQueryInput,showSaveQuery:u.showSaveQuery,showSubmitButton:u.showSubmitButton,submitButtonStyle:u.submitButtonStyle,isDisabled:u.isDisabled,screenTitle:u.screenTitle,indexPatterns:u.indexPatterns,indicateNoData:u.indicateNoData,timeHistory:n.query.timefilter.history,dateRangeFrom:v.from,dateRangeTo:v.to,refreshInterval:j.value,isRefreshPaused:j.pause,filters:p,query:k,onFiltersUpdated:(E=n.query,e=>{E.filterManager.setFilters(e)}),onRefreshChange:y(n.query),savedQuery:O,onQuerySubmit:x(u,n.query,k),onClearSavedQuery:_(u,I),onSavedQueryUpdated:S(u,w),onSaved:S(u,w),iconType:u.iconType,nonKqlMode:u.nonKqlMode,customSubmitButton:u.customSubmitButton,isClearable:u.isClearable,placeholder:u.placeholder},(e=>e.useDefaultBehaviors?{}:e)(u),{dataViewPickerComponentProps:u.dataViewPickerComponentProps,textBasedLanguageModeErrors:u.textBasedLanguageModeErrors,onTextBasedSavedAndExit:u.onTextBasedSavedAndExit,displayStyle:u.displayStyle,isScreenshotMode:i})));var E}}const v=()=>Object(o.jsx)("div",null),j=r.a.lazy((()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(7)]).then(n.bind(null,139)))),T=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(v,null)},Object(o.jsx)(j,e));var O=n(16),w=n(18),I=n(25),E=n(15),P=n(9);const q=()=>Object(o.jsx)("div",null),M=r.a.lazy((()=>n.e(11).then(n.bind(null,136)))),C="ACTION_GLOBAL_APPLY_FILTER";async function D(e){return void 0!==e.filters}function F(e,t,a){return Object(E.createAction)({type:C,id:C,order:100,getIconType:()=>"filter",getDisplayName:()=>f.i18n.translate("unifiedSearch.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"}),isCompatible:D,execute:async({filters:i,timeFieldName:s,controlledBy:u})=>{if(!i)throw new Error("Applying a filter requires a filter");if(!await D({filters:i}))throw new E.IncompatibleActionError;let l=i;if(l.length>1){const e=await Promise.all(i.map((e=>Object(P.a)().get(e.meta.index)))),t=new Promise((t=>{const n=Object(P.b)().openModal(Object(g.toMountPoint)(((e,a,i,s)=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(q,null)},Object(o.jsx)(M,{indexPatterns:a,filters:e,onCancel:()=>{n.close(),t([])},onSubmit:e=>{n.close(),t(e)}})))(i,e),{theme$:a.theme$}),{"data-test-subj":"test"})}));l=await t}if(u&&e.getFilters().forEach((t=>{t.meta.controlledBy===u&&e.removeFilter(t)})),s){const{extractTimeFilter:a}=await n.e(0).then(n.bind(null,44)),{timeRangeFilter:r,restOfFilters:o}=a(s,l);e.addFilters(o),r&&async function(e,t){const{convertRangeFilterToTimeRange:a}=await n.e(0).then(n.bind(null,44));e.setTime(a(t))}(t,r)}else e.addFilters(l)}})}const R="UPDATE_FILTER_REFERENCES_ACTION",A="UPDATE_FILTER_REFERENCES_TRIGGER",L={id:A,title:f.i18n.translate("unifiedSearch.triggers.updateFilterReferencesTrigger",{defaultMessage:"Update filter references"}),description:f.i18n.translate("unifiedSearch.triggers.updateFilterReferencesTriggerDescription",{defaultMessage:"Update filter references"})};var B=n(7),Q=n(6),V=n.n(Q),N=n(12),U=n(13),$=n(24);const z=()=>Object(o.jsx)("div",null),G=r.a.lazy((()=>n.e(14).then(n.bind(null,137)))),K=e=>Object(o.jsx)(r.a.Suspense,{fallback:Object(o.jsx)(z,null)},Object(o.jsx)(G,e));n(29);class plugin_UnifiedSearchPublicPlugin{constructor(e){V()(this,"storage",void 0),V()(this,"autocomplete",void 0),V()(this,"usageCollection",void 0),this.storage=new N.Storage(window.localStorage),this.autocomplete=new $.a(e)}setup(e,{uiActions:t,data:n,usageCollection:a}){const{query:r}=n;var o;return t.registerTrigger(L),t.registerAction(F(r.filterManager,r.timefilter.timefilter,e.theme)),t.registerAction((o=r.filterManager,Object(E.createAction)({type:R,id:R,execute:async({fromDataView:e,toDataView:t,usedDataViews:n,defaultDataView:a})=>{const r=n.filter((t=>t===e)).length,i=o.getFilters();r>1||!i.length||!e||(e&&!t&&(n.length>1&&(t=n.filter((t=>t!==e))[0]),!t&&a&&(t=a)),t&&o.setFilters(i.map((n=>n.meta.index===e?{...n,meta:{...n.meta,index:t}}:n))))}}))),this.usageCollection=a,{autocomplete:this.autocomplete.setup(e,{timefilter:r.timefilter,usageCollection:a})}}start(e,{data:t,dataViews:n,uiActions:a,screenshotMode:r}){Object(P.f)(e.theme),Object(P.e)(e.overlays),Object(P.d)(n);const i=this.autocomplete.start(),s=k({core:e,data:t,storage:this.storage,usageCollection:this.usageCollection,isScreenshotMode:Boolean(null==r?void 0:r.isScreenshotMode()),unifiedSearch:{autocomplete:i}});return a.addTriggerAction(U.APPLY_FILTER_TRIGGER,a.getAction(C)),a.addTriggerAction(A,a.getAction(R)),{ui:{IndexPatternSelect:(u=n,e=>Object(o.jsx)(K,c()({},e,{indexPatternService:u}))),SearchBar:s,AggregateQuerySearchBar:s},autocomplete:i};var u}stop(){this.autocomplete.clearProviders()}}function W(e){return new plugin_UnifiedSearchPublicPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.Classnames},,function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},,function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone}]);