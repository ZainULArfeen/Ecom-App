/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[30],{1211:function(e,t,n){"use strict";n.r(t),n.d(t,"PinnedTabContentComponent",(function(){return M})),n.d(t,"default",(function(){return V}));var i=n(17),l=n(3),o=n(4),a=n.n(o),d=n(24),s=n.n(d),r=n(47),u=n(92),m=n.n(u),c=n(91),p=n(873),g=n(899),h=n(80),b=n(878),y=n(901),E=n(349),P=n(600),f=n(13),w=n(94),C=n(207),v=n(96),I=n(241),F=n(15),O=n(418),j=n(673),S=n(423),x=n(79);const q=s()(i.EuiFlyoutBody).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"sc-1kqzlqh-0"})(["overflow-y:hidden;flex:1;.euiFlyoutBody__overflow{overflow:hidden;mask-image:none;}.euiFlyoutBody__overflowContent{padding:0;height:100%;display:flex;}"]),N=s()(i.EuiFlyoutFooter).withConfig({displayName:"StyledEuiFlyoutFooter",componentId:"sc-1kqzlqh-1"})(["background:none;padding:0;&.euiFlyoutFooter{","}"],(({theme:e})=>`padding: ${e.eui.euiSizeS} 0 0 0;`)),_=s.a.div.withConfig({displayName:"ExitFullScreenContainer",componentId:"sc-1kqzlqh-2"})(["width:180px;"]),k=s()(i.EuiFlexGroup).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-1kqzlqh-3"})(["margin:0;width:100%;overflow:hidden;"]),D=s()(i.EuiFlexItem).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-1kqzlqh-4"})(["overflow:hidden;"]),T=s.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-1kqzlqh-5"})(["width:2px;height:100%;background:",";"],(({theme:e})=>e.eui.euiColorLightShade));T.displayName="VerticalRule";const z=[],M=({columns:e,timelineId:t,itemsPerPage:n,itemsPerPageOptions:i,pinnedEventIds:d,onEventClosed:s,renderCellValue:r,rowRenderers:u,showExpandedDetails:m,sort:c})=>{const{browserFields:w,dataViewId:M,loading:V,runtimeMappings:B,selectedPatterns:R}=Object(C.d)(f.SourcererScopeName.timeline),{setTimelineFullScreen:$,timelineFullScreen:L}=Object(v.c)(),A=Object(x.b)().isEnterprise()?6:5,G=Object(o.useMemo)((()=>{if(Object(l.isEmpty)(d))return"";const e=Object.entries(d).reduce(((e,[t,n])=>n?{...e,bool:{...e.bool,should:[...e.bool.should,{match_phrase:{_id:t}}]}}:e),{bool:{should:[],minimum_should_match:1}});try{return JSON.stringify(e)}catch{return""}}),[d]),J=Object(o.useMemo)((()=>[...(Object(l.isEmpty)(e)?h.b:e).map((e=>e.id)),...E.h]),[e]),K=Object(o.useMemo)((()=>c.map((({columnId:e,columnType:t,esTypes:n,sortDirection:i})=>({field:e,type:t,direction:i,esTypes:null!=n?n:[]})))),[c]),[Q,{events:W,totalCount:H,pageInfo:U,loadPage:X,updatedAt:Y,refetch:Z}]=Object(g.a)({endDate:"",id:`pinned-${t}`,indexNames:R,dataViewId:M,fields:J,limit:n,filterQuery:G,runtimeMappings:B,skip:""===G,startDate:"",sort:K,timerangeKind:void 0}),ee=Object(o.useCallback)((()=>{s({tabType:F.l.pinned,timelineId:t})}),[t,s]),te=Object(o.useMemo)((()=>Object(S.a)(A).map((e=>({...e,headerCellRender:p.a})))),[A]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(k,{"data-test-subj":`${F.l.pinned}-tab`},a.a.createElement(D,{grow:2},L&&null!=$&&a.a.createElement(_,null,a.a.createElement(j.b,{fullScreen:L,setFullScreen:$})),a.a.createElement(P.a,null,a.a.createElement(q,{"data-test-subj":`${F.l.pinned}-tab-flyout-body`,className:"timeline-flyout-body"},a.a.createElement(b.a,{activePage:U.activePage,browserFields:w,data:W,id:t,refetch:Z,renderCellValue:r,rowRenderers:u,sort:c,tabType:F.l.pinned,totalPages:Object(I.h)({itemsCount:H,itemsPerPage:n}),leadingControlColumns:te,trailingControlColumns:z})),a.a.createElement(N,{"data-test-subj":`${F.l.pinned}-tab-flyout-footer`,className:"timeline-flyout-footer"},a.a.createElement(y.a,{activePage:U.activePage,"data-test-subj":"timeline-footer",updatedAt:Y,height:y.b,id:t,isLive:!1,isLoading:Q||V,itemsCount:W.length,itemsPerPage:n,itemsPerPageOptions:i,onChangePage:X,totalCount:H})))),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(T,null),a.a.createElement(D,{grow:1},a.a.createElement(O.a,{browserFields:w,handleOnPanelClosed:ee,runtimeMappings:B,tabType:F.l.pinned,timelineId:t})))))},V=Object(r.connect)((()=>{const e=c.b.getTimelineByIdSelector();return(t,{timelineId:n})=>{var i,l;const o=null!==(i=e(t,n))&&void 0!==i?i:w.a,{columns:a,expandedDetail:d,itemsPerPage:s,itemsPerPageOptions:r,pinnedEventIds:u,sort:m}=o;return{columns:a,timelineId:n,itemsPerPage:s,itemsPerPageOptions:r,pinnedEventIds:u,showExpandedDetails:!!d[F.l.pinned]&&!(null===(l=d[F.l.pinned])||void 0===l||!l.panelView),sort:m}}}),((e,{timelineId:t})=>({onEventClosed:t=>{e(c.a.toggleDetailPanel(t))}})))(a.a.memo(M,((e,t)=>e.itemsPerPage===t.itemsPerPage&&e.onEventClosed===t.onEventClosed&&e.showExpandedDetails===t.showExpandedDetails&&e.timelineId===t.timelineId&&m()(e.columns,t.columns)&&m()(e.itemsPerPageOptions,t.itemsPerPageOptions)&&m()(e.pinnedEventIds,t.pinnedEventIds)&&m()(e.sort,t.sort))))}}]);