/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[8],{313:function(e,t,s){"use strict";s.r(t),s.d(t,"FieldBrowser",(function(){return K})),s.d(t,"default",(function(){return K}));var l=s(13),i=s(15),n=s(0),o=s.n(n),a=s(1);const c=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.categoryLabel",{defaultMessage:"Category"}),r=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.categoriesTitle",{defaultMessage:"Categories"}),u=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.closeButton",{defaultMessage:"Close"}),d=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldBrowserTitle",{defaultMessage:"Fields"}),b=(a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.descriptionLabel",{defaultMessage:"Description"}),a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldName",{defaultMessage:"Name"})),j=(a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldLabel",{defaultMessage:"Field"}),a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldsTitle",{defaultMessage:"Fields"})),g=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldsCountShowing",{defaultMessage:"Showing"}),m=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.filterPlaceholder",{defaultMessage:"Field name"}),f=(a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.noFieldsMatchLabel",{defaultMessage:"No fields match"}),a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.resetFieldsLink",{defaultMessage:"Reset Fields"})),p=e=>a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.viewColumnCheckboxAriaLabel",{values:{field:e},defaultMessage:"View {field} column"}),x=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.viewLabel",{defaultMessage:"View"}),O=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.viewSelected",{defaultMessage:"selected"}),h=a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.viewAll",{defaultMessage:"all"});var w=s(3);const C=e=>null==e?void 0:e.focus(),I=o.a.memo((({isSearching:e,onSearchInputChange:t,searchInput:s})=>Object(w.jsx)(l.EuiFieldSearch,{"data-test-subj":"field-search",inputRef:C,isLoading:e,onChange:t,placeholder:m,value:s,fullWidth:!0})));I.displayName="Search";var y=s(83);const S=e=>null!=e&&null!=e.fields?Object.keys(e.fields).length:0,k=e=>{switch(e){case"string":case"keyword":return"string";case"number":case"long":case"float":return"number";case"date":return"clock";case"ip":case"geo_point":return"globe";default:return"questionInCircle"}},E={countBadge:{name:"1qkltea",styles:"margin-left:5px"},categoryName:({bold:e})=>Object(w.css)("font-weight:",e?"bold":"normal",";",""),selectableContainer:{name:"18ji2p4",styles:"width:300px"}},F=(e,t)=>{const{label:s,count:i,checked:n}=e,o=s.replace(/\s/g,"");return Object(w.jsx)(l.EuiFlexGroup,{"data-test-subj":`categories-selector-option-${o}`,alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween"},Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)("span",{css:E.categoryName({bold:"on"===n}),"data-test-subj":`categories-selector-option-name-${o}`},Object(w.jsx)(l.EuiHighlight,{search:t},s))),Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(l.EuiBadge,{css:E.countBadge},i)))},v=({filteredBrowserFields:e,setSelectedCategoryIds:t,selectedCategoryIds:s})=>{const[a,c]=Object(n.useState)(!1),u=Object(n.useCallback)((()=>{c((e=>!e))}),[]),d=Object(n.useCallback)((()=>{c(!1)}),[]),b=Object(n.useMemo)((()=>Object.keys(e).length),[e]),j=Object(n.useMemo)((()=>{const t=Object.keys(Object(i.omit)(e,s)).sort();return[...s.map((t=>({label:t,count:S(e[t]),checked:"on"}))),...t.map((t=>({label:t,count:S(e[t])})))]}),[s,e]),g=Object(n.useCallback)((e=>{t(e.filter((({checked:e})=>"on"===e)).map((({label:e})=>e)))}),[t]),m=Object(n.useCallback)((e=>{"Escape"===e.key&&e.stopPropagation()}),[]);return Object(w.jsx)(l.EuiFilterGroup,{"data-test-subj":"categories-selector"},Object(w.jsx)(l.EuiPopover,{button:Object(w.jsx)(l.EuiFilterButton,{"data-test-subj":"categories-filter-button",hasActiveFilters:s.length>0,iconType:"arrowDown",isSelected:a,numActiveFilters:s.length,numFilters:b,onClick:u},r),isOpen:a,closePopover:d,panelPaddingSize:"none"},Object(w.jsx)("div",{css:E.selectableContainer,onKeyDown:m,"data-test-subj":"categories-selector-container"},Object(w.jsx)(l.EuiSelectable,{"aria-label":"Searchable categories",searchable:!0,searchProps:{"data-test-subj":"categories-selector-search"},options:j,renderOption:F,onChange:g},((e,t)=>Object(w.jsx)(o.a.Fragment,null,t,e))))))},B=o.a.memo(v),T=({euiTheme:e})=>Object(w.css)("margin-top:",e.size.xs,";min-height:24px;",""),M=({setSelectedCategoryIds:e,selectedCategoryIds:t})=>{const{euiTheme:s}=Object(l.useEuiTheme)(),i=Object(n.useCallback)((s=>{e(t.filter((e=>e!==s)))}),[e,t]);return Object(w.jsx)(l.EuiFlexGroup,{css:T({euiTheme:s}),"data-test-subj":"category-badges",gutterSize:"xs",wrap:!0},t.map((e=>Object(w.jsx)(l.EuiFlexItem,{grow:!1,key:e},Object(w.jsx)(l.EuiBadge,{iconType:"cross",iconSide:"right",iconOnClick:()=>i(e),iconOnClickAriaLabel:"unselect category","data-test-subj":`category-badge-${e}`,closeButtonProps:{"data-test-subj":`category-badge-unselect-${e}`}},e)))))},A=o.a.memo(M),U=o.a.memo((({fieldId:e,highlight:t=""})=>Object(w.jsx)(l.EuiText,{size:"xs"},Object(w.jsx)(l.EuiHighlight,{"data-test-subj":`field-${e}-name`,search:t},e))));U.displayName="FieldName";const z={icon:{name:"p3x1bt",styles:"margin:0 4px;position:relative;top:-1px"},truncatable:{name:"9v6jjg",styles:"&,& *{display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:top;white-space:nowrap;}"},description:{name:"1cthmrf",styles:"user-select:text;width:400px"}},$=e=>[{field:"name",name:b,render:(t,{type:s})=>Object(w.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(l.EuiToolTip,{content:s},Object(w.jsx)(l.EuiIcon,{"data-test-subj":`field-${t}-icon`,css:z.icon,type:k(null!=s?s:null)}))),Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(U,{fieldId:t,highlight:e}))),sortable:!0,width:"225px"},{field:"category",name:c,render:(e,{name:t})=>Object(w.jsx)(l.EuiBadge,{"data-test-subj":`field-${t}-category`},e),sortable:!0,width:"130px"}],H={count:{name:"1efi8gv",styles:"font-weight:bold"}},N=({fieldCount:e,filterSelectedEnabled:t,onFilterSelectedChange:s})=>{const[i,o]=Object(n.useState)(!1),c=Object(n.useCallback)((()=>{o((e=>!e))}),[]),r=Object(n.useCallback)((()=>{o(!1)}),[]);return Object(w.jsx)(l.EuiFlexGroup,null,Object(w.jsx)(l.EuiFlexItem,null,Object(w.jsx)(l.EuiText,{"data-test-subj":"fields-showing",size:"xs"},g,Object(w.jsx)("span",{css:H.count,"data-test-subj":"fields-count"}," ",e," "),(u=e,a.i18n.translate("xpack.triggersActionsUI.fieldBrowser.fieldsCountTitle",{values:{totalCount:u},defaultMessage:"{totalCount, plural, =1 {field} other {fields}}"})))),Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(l.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downRight",isOpen:i,closePopover:r,button:Object(w.jsx)(l.EuiButtonEmpty,{"data-test-subj":"viewSelectorButton",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:c},`${x}: ${t?O:h}`)},Object(w.jsx)(l.EuiContextMenuPanel,{"data-test-subj":"viewSelectorMenu",size:"s",items:[Object(w.jsx)(l.EuiContextMenuItem,{"data-test-subj":"viewSelectorOption-all",key:"viewAll",icon:t?"empty":"check",onClick:()=>{s(!1),r()}},`${x} ${h}`),Object(w.jsx)(l.EuiHorizontalRule,{key:"separator",margin:"none"}),Object(w.jsx)(l.EuiContextMenuItem,{"data-test-subj":"viewSelectorOption-selected",key:"viewSelected",icon:t?"check":"empty",onClick:()=>{s(!0),r()}},`${x} ${O}`)]}))));var u},P=o.a.memo(N),R=({height:e,euiTheme:t})=>Object(w.css)("margin-top:",t.size.xs,";border-top:",t.border.thin,";height:",e,"px;overflow:hidden;",""),L={field:"",direction:"asc"},G=({columnIds:e,filteredBrowserFields:t,filterSelectedEnabled:s,getFieldTableColumns:i,searchInput:a,selectedCategoryIds:c,onFilterSelectedChange:r,onToggleColumn:u,onHide:d})=>{const{euiTheme:b}=Object(l.useEuiTheme)(),[j,g]=Object(n.useState)(0),[m,f]=Object(n.useState)(10),[x,O]=Object(n.useState)(L.field),[h,C]=Object(n.useState)(L.direction),I=Object(n.useMemo)((()=>(({browserFields:e,selectedCategoryIds:t,columnIds:s})=>{const l=t.length>0?t:Object.keys(e),i=new Set(s);return Object(y.uniqBy)("name",l.reduce(((t,s)=>{var l,n;const o=Object.values(null!==(l=null===(n=e[s])||void 0===n?void 0:n.fields)&&void 0!==l?l:{});return o.length>0&&t.push(...o.map((({name:e="",...t})=>{var l,n;return{name:e,type:t.type,description:null!==(l=t.description)&&void 0!==l?l:"",example:null===(n=t.example)||void 0===n?void 0:n.toString(),category:s,selected:i.has(e),isRuntime:!!t.runtimeField}}))),t}),[]))})({browserFields:t,selectedCategoryIds:c,columnIds:e})),[e,t,c]),S=Object(n.useMemo)((()=>({pageIndex:j,pageSize:m,totalItemCount:I.length,pageSizeOptions:[10,25,50]})),[I.length,j,m]);Object(n.useEffect)((()=>{g(0)}),[I.length]);const k=Object(n.useMemo)((()=>({sort:{field:x,direction:h}})),[h,x]),E=Object(n.useCallback)((({page:e,sort:t=L})=>{const{index:s,size:l}=e,{field:i,direction:n}=t;g(s),f(l),O(i),C(n)}),[]),F=Object(n.useMemo)((()=>(({onToggleColumn:e,highlight:t="",getFieldTableColumns:s,onHide:i})=>[{field:"selected",name:"",render:(t,{name:s})=>Object(w.jsx)(l.EuiToolTip,{content:p(s)},Object(w.jsx)(l.EuiCheckbox,{"aria-label":p(s),checked:t,"data-test-subj":`field-${s}-checkbox`,"data-colindex":1,id:s,onChange:()=>e(s)})),sortable:!1,width:"25px"},...s?s({highlight:t,onHide:i}):$(t)])({highlight:a,onToggleColumn:u,getFieldTableColumns:i,onHide:d})),[u,a,i,d]),v=Object(n.useMemo)((()=>F.some((e=>(e=>{var t;return!(null===(t=e.actions)||void 0===t||!t.length)})(e)))),[F]);return Object(w.jsx)(o.a.Fragment,null,Object(w.jsx)(P,{fieldCount:I.length,filterSelectedEnabled:s,onFilterSelectedChange:r}),Object(w.jsx)("div",{css:R({height:260,euiTheme:b})},Object(w.jsx)(l.EuiInMemoryTable,{"data-test-subj":"field-table",className:"category-table eui-yScroll",items:I,itemId:"name",columns:F,pagination:S,sorting:k,hasActions:v,onChange:E,compressed:!0})))},_=o.a.memo(G),D=({appliedFilterInput:e,columnIds:t,filteredBrowserFields:s,filterSelectedEnabled:i,isSearching:o,onFilterSelectedChange:a,onToggleColumn:c,onResetColumns:r,setSelectedCategoryIds:b,onSearchInputChange:j,onHide:g,options:m,restoreFocusTo:p,searchInput:x,selectedCategoryIds:O,width:h=925})=>{const C=Object(n.useCallback)((()=>{g(),setTimeout((()=>{var e;null===(e=p.current)||void 0===e||e.focus()}),0)}),[g,p]),y=Object(n.useCallback)((()=>{r(),C()}),[C,r]),S=Object(n.useCallback)((e=>{j(e.target.value)}),[j]),[k,E]=[null==m?void 0:m.createFieldButton,null==m?void 0:m.getFieldTableColumns];return Object(w.jsx)(l.EuiModal,{onClose:C,style:{width:h,maxWidth:h}},Object(w.jsx)("div",{"data-test-subj":"fields-browser-container",className:"eui-yScroll"},Object(w.jsx)(l.EuiModalHeader,null,Object(w.jsx)(l.EuiModalHeaderTitle,null,Object(w.jsx)("h1",null,d))),Object(w.jsx)(l.EuiModalBody,null,Object(w.jsx)(l.EuiFlexGroup,{gutterSize:"m"},Object(w.jsx)(l.EuiFlexItem,null,Object(w.jsx)(I,{"data-test-subj":"header",isSearching:o,onSearchInputChange:S,searchInput:x})),Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(B,{filteredBrowserFields:s,setSelectedCategoryIds:b,selectedCategoryIds:O})),Object(w.jsx)(l.EuiFlexItem,{grow:!1},k&&Object(w.jsx)(k,{onHide:g}))),Object(w.jsx)(A,{selectedCategoryIds:O,setSelectedCategoryIds:b}),Object(w.jsx)(l.EuiSpacer,{size:"l"}),Object(w.jsx)(_,{columnIds:t,filteredBrowserFields:s,filterSelectedEnabled:i,searchInput:e,selectedCategoryIds:O,onFilterSelectedChange:a,onToggleColumn:c,getFieldTableColumns:E,onHide:g})),Object(w.jsx)(l.EuiModalFooter,null,Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(l.EuiButtonEmpty,{className:"reset-fields","data-test-subj":"reset-fields",onClick:y},f)),Object(w.jsx)(l.EuiFlexItem,{grow:!1},Object(w.jsx)(l.EuiButton,{onClick:C,"aria-label":u,className:"close-button","data-test-subj":"close"},u)))))},q=o.a.memo(D),V={buttonContainer:{name:"11ffxfj",styles:"display:inline-block;position:relative"}},W=({columnIds:e,browserFields:t,onResetColumns:s,onToggleColumn:o,options:a,width:c})=>{const r=Object(n.useRef)(null),[u,b]=Object(n.useState)(""),[g,m]=Object(n.useState)(""),[f,p]=Object(n.useState)(null),[x,O]=Object(n.useState)(!1),[h,C]=Object(n.useState)(!1),[I,y]=Object(n.useState)([]),[S,k]=Object(n.useState)(!1),E=Object(n.useMemo)((()=>Object(i.debounce)((e=>{m(e)}),250)),[]);Object(n.useEffect)((()=>()=>{E.cancel()}),[E]);const F=Object(n.useMemo)((()=>x?(({browserFields:e,columnIds:t})=>{const s=new Set(t),l={};for(const[t,i]of Object.entries(e)){if(!i.fields)continue;let n=!1;const o={};for(const[e,t]of Object.entries(i.fields)){const l=t.name;l&&s.has(l)&&(n=!0,o[e]=t)}n&&(l[t]={...e[t],fields:o})}return l})({browserFields:t,columnIds:e}):t),[t,e,x]);Object(n.useEffect)((()=>{p(function({browserFields:e,substring:t}){const s=t.trim();if(""===s)return e;const l={};for(const[t,i]of Object.entries(e)){if(!i.fields)continue;let n=!1;const o={};for(const[e,t]of Object.entries(i.fields)){const l=t.name;l&&null!==l&&l.includes(s)&&(n=!0,o[e]=t)}n&&(l[t]={...e[t],fields:o})}return l}({browserFields:F,substring:g})),C(!1)}),[g,F]);const v=Object(n.useCallback)((()=>{k(!0)}),[]),B=Object(n.useCallback)((()=>{b(""),m(""),p(null),O(!1),C(!1),y([]),k(!1)}),[]),T=Object(n.useCallback)((e=>{C(!0),b(e),E(e)}),[E]),M=Object(n.useCallback)((e=>{O(e)}),[O]);return Object(w.jsx)("div",{css:V.buttonContainer,"data-test-subj":"fields-browser-button-container"},Object(w.jsx)(l.EuiToolTip,{content:d},Object(w.jsx)(l.EuiButtonEmpty,{"aria-label":d,buttonRef:r,className:"fields-button",color:"text","data-test-subj":"show-field-browser",iconType:"tableOfContents",onClick:v,size:"xs"},j)),S&&Object(w.jsx)(q,{columnIds:e,filteredBrowserFields:null!=f?f:t,filterSelectedEnabled:x,isSearching:h,setSelectedCategoryIds:y,onFilterSelectedChange:M,onHide:B,onResetColumns:s,onSearchInputChange:T,onToggleColumn:o,options:a,restoreFocusTo:r,searchInput:u,appliedFilterInput:g,selectedCategoryIds:I,width:c}))},K=o.a.memo(W)}}]);