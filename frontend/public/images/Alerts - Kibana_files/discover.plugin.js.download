!function(e){function t(t){for(var r,i,s=t[0],a=t[1],o=0,d=[];o<s.length;o++)i=s[o],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(c&&c(t);d.length;)d.shift()()}var r={},n={4:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=s);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=function(e){return i.p+"discover.chunk."+e+".js"}(e);var c=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(d);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,r[1](c)}n[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var c=a;i(i.s=25)}([function(e,t,r){e.exports=r(24)(2)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,r){"use strict";r.d(t,"j",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"k",(function(){return p})),r.d(t,"a",(function(){return f})),r.d(t,"g",(function(){return _})),r.d(t,"c",(function(){return b})),r.d(t,"l",(function(){return h})),r.d(t,"d",(function(){return g})),r.d(t,"i",(function(){return v}));var n=r(9),i=r(17),s=r(2);let a;const o=e=>a=e,c=()=>a,[d,u]=Object(s.createGetterSetter)("headerActionMenuMounter"),[l,p]=Object(s.createGetterSetter)("urlTracker"),[f,_]=Object(s.createGetterSetter)("DocViewsRegistry"),b=Object(n.once)((()=>{const e=Object(i.createHashHistory)();return e.listen((()=>{})),e})),h=()=>{const e=b();return Object.assign(e.location,Object(i.createHashHistory)().location),e},[g,v]=Object(s.createGetterSetter)("scopedHistory")},function(e,t,r){"use strict";r.r(t),r.d(t,"PLUGIN_ID",(function(){return n})),r.d(t,"APP_ICON",(function(){return i})),r.d(t,"DEFAULT_COLUMNS_SETTING",(function(){return s})),r.d(t,"SAMPLE_SIZE_SETTING",(function(){return a})),r.d(t,"SAMPLE_ROWS_PER_PAGE_SETTING",(function(){return o})),r.d(t,"SORT_DEFAULT_ORDER_SETTING",(function(){return c})),r.d(t,"SEARCH_ON_PAGE_LOAD_SETTING",(function(){return d})),r.d(t,"DOC_HIDE_TIME_COLUMN_SETTING",(function(){return u})),r.d(t,"FIELDS_LIMIT_SETTING",(function(){return l})),r.d(t,"CONTEXT_DEFAULT_SIZE_SETTING",(function(){return p})),r.d(t,"CONTEXT_STEP_SETTING",(function(){return f})),r.d(t,"CONTEXT_TIE_BREAKER_FIELDS_SETTING",(function(){return _})),r.d(t,"DOC_TABLE_LEGACY",(function(){return b})),r.d(t,"MODIFY_COLUMNS_ON_SWITCH",(function(){return h})),r.d(t,"SEARCH_FIELDS_FROM_SOURCE",(function(){return g})),r.d(t,"MAX_DOC_FIELDS_DISPLAYED",(function(){return v})),r.d(t,"SHOW_FIELD_STATISTICS",(function(){return S})),r.d(t,"SHOW_MULTIFIELDS",(function(){return O})),r.d(t,"TRUNCATE_MAX_HEIGHT",(function(){return y})),r.d(t,"ROW_HEIGHT_OPTION",(function(){return m})),r.d(t,"SEARCH_EMBEDDABLE_TYPE",(function(){return w})),r.d(t,"HIDE_ANNOUNCEMENTS",(function(){return j})),r.d(t,"SHOW_LEGACY_FIELD_TOP_VALUES",(function(){return E})),r.d(t,"ENABLE_SQL",(function(){return D}));const n="discover",i="discoverApp",s="defaultColumns",a="discover:sampleSize",o="discover:sampleRowsPerPage",c="discover:sort:defaultOrder",d="discover:searchOnPageLoad",u="doc_table:hideTimeColumn",l="fields:popularLimit",p="context:defaultSize",f="context:step",_="context:tieBreakerFields",b="doc_table:legacy",h="discover:modifyColumnsOnSwitch",g="discover:searchFieldsFromSource",v="discover:maxDocFieldsDisplayed",S="discover:showFieldStatistics",O="discover:showMultiFields",y="truncate:maxHeight",m="discover:rowHeightOption",w="search",j="hideAnnouncements",E="discover:showLegacyFieldTopValues",D="discover:enableSql"},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return DiscoverAppLocatorDefinition}));var n=r(0),i=r.n(n),s=r(2);const a="DISCOVER_APP_LOCATOR";class DiscoverAppLocatorDefinition{constructor(e){i()(this,"id",a),i()(this,"getLocation",(async e=>{const{useHash:t=this.deps.useHash,filters:n,dataViewId:i,indexPatternId:a,dataViewSpec:o,query:c,refreshInterval:d,savedSearchId:u,timeRange:l,searchSessionId:p,columns:f,savedQuery:_,sort:b,interval:h,viewMode:g,hideAggregatedPreview:v}=e,S=u?`view/${encodeURIComponent(u)}`:"",O={},y={},{isFilterPinned:m}=await r.e(0).then(r.bind(null,43));c&&(O.query=c),n&&n.length&&(O.filters=null==n?void 0:n.filter((e=>!m(e)))),a&&(O.index=a),i&&(O.index=i),f&&(O.columns=f),_&&(O.savedQuery=_),b&&(O.sort=b),h&&(O.interval=h),l&&(y.time=l),n&&n.length&&(y.filters=null==n?void 0:n.filter((e=>m(e)))),d&&(y.refreshInterval=d),g&&(O.viewMode=g),v&&(O.hideAggregatedPreview=v);const w={};o&&(w.dataViewSpec=o);let j=`#/${S}`;return j=Object(s.setStateToKbnUrl)("_g",y,{useHash:t},j),j=Object(s.setStateToKbnUrl)("_a",O,{useHash:t},j),p&&(j=`${j}&searchSessionId=${p}`),{app:"discover",path:j,state:w}})),this.deps=e}}},function(e,t,r){"use strict";var n=r(7);r.d(t,"a",(function(){return n.SEARCH_EMBEDDABLE_TYPE}))},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,r){"use strict";e.exports=r(28)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n="searchSessionId"},function(e,t){e.exports=__kbnSharedDeps__.History},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(19);const i=()=>Object(n.useKibana)().services},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){"use strict";e.exports=r(27)},function(e,t,r){"use strict";e.exports=r(35)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){r(26),__kbnBundles__.define("plugin/discover/public",r,37),__kbnBundles__.define("plugin/discover/common",r,7)},function(e,t,r){r.p=window.__kbnPublicPath__.discover},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(12),r(13),r(22);var n=r(36).default({key:"css"}),i=n.flush,s=n.hydrate,a=n.cx,o=n.merge,c=n.getRegisteredStyles,d=n.injectGlobal,u=n.keyframes,l=n.css,p=n.sheet,f=n.cache;t.cache=f,t.css=l,t.cx=a,t.flush=i,t.getRegisteredStyles=c,t.hydrate=s,t.injectGlobal=d,t.keyframes=u,t.merge=o,t.sheet=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29),i=r(31),s=r(33);function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n),c=a(i),d=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},p=function(e){return null!=e&&"boolean"!=typeof e},f=a(s).default((function(e){return l(e)?e:e.replace(d,"-$&").toLowerCase()})),_=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,r){return h={name:t,styles:r,next:h},t}))}return 1===c.default[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"};function b(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return h={name:r.name,styles:r.styles,next:h},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)h={name:n.name,styles:n.styles,next:h},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=b(e,t,r[i])+";";else for(var s in r){var a=r[s];if("object"!=typeof a)null!=t&&void 0!==t[a]?n+=s+"{"+t[a]+"}":p(a)&&(n+=f(s)+":"+_(s,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var o=b(e,t,a);switch(s){case"animation":case"animationName":n+=f(s)+":"+o+";";break;default:n+=s+"{"+o+"}"}}else for(var c=0;c<a.length;c++)p(a[c])&&(n+=f(s)+":"+_(s,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=h,s=r(e);return h=i,b(e,t,s)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var h,g=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";h=void 0;var s=e[0];null==s||void 0===s.raw?(n=!1,i+=b(r,t,s)):i+=s[0];for(var a=1;a<e.length;a++)i+=b(r,t,e[a]),n&&(i+=s[a]);g.lastIndex=0;for(var c,d="";null!==(c=g.exec(i));)d+="-"+c[1];return{name:o.default(i)+d,styles:i,next:h}}},function(e,t,r){"use strict";e.exports=r(30)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}},function(e,t,r){"use strict";e.exports=r(32)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";e.exports=r(34)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,i=function(e,t,r){var i=e.key+"-"+t.name;(!1===r||!1===n&&void 0!==e.compat)&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};t.getRegisteredStyles=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n},t.insertStyles=function(e,t,r){i(e,t,r);var s=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",o=t;do{var c=e.insert(t===o?"."+s:"",o,e.sheet,!0);n||void 0===c||(a+=c),o=o.next}while(void 0!==o);if(!n&&0!==a.length)return a}},t.registerStyles=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(13),s=r(22);function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function d(e,t,r){var n=[],i=s.getRegisteredStyles(e,n,r);return n.length<2?r:i+t(n)}var u=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(null!=i){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=e(i);else for(var a in s="",i)i[a]&&a&&(s&&(s+=" "),s+=a);break;default:s=i}s&&(r&&(r+=" "),r+=s)}}return r};t.default=function(e){var t=o.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=i.serializeStyles(r,t.registered,void 0);return s.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:r,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return d(t.registered,r,u(n))},injectGlobal:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=i.serializeStyles(r,t.registered);c(t,s)},keyframes:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=i.serializeStyles(r,t.registered),a="animation-"+s.name;return c(t,{name:s.name,styles:"@keyframes "+a+"{"+s.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:s.getRegisteredStyles.bind(null,t.registered),merge:d.bind(null,t.registered,r)}}},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return L})),r.d(t,"SEARCH_EMBEDDABLE_TYPE",(function(){return g.a})),r.d(t,"loadSharingDataHelpers",(function(){return R})),r.d(t,"DISCOVER_APP_LOCATOR",(function(){return h.a})),r.d(t,"SavedSearch",(function(){return S.SavedSearch})),r.d(t,"getSavedSearch",(function(){return S.getSavedSearch})),r.d(t,"getSavedSearchFullPathUrl",(function(){return S.getSavedSearchFullPathUrl})),r.d(t,"getSavedSearchUrl",(function(){return S.getSavedSearchUrl})),r.d(t,"getSavedSearchUrlConflictMessage",(function(){return S.getSavedSearchUrlConflictMessage})),r.d(t,"throwErrorOnSavedSearchUrlConflict",(function(){return S.throwErrorOnSavedSearchUrlConflict})),r.d(t,"VIEW_MODE",(function(){return S.VIEW_MODE})),r.d(t,"DiscoverGridSettings",(function(){return S.DiscoverGridSettings})),r.d(t,"DiscoverGridSettingsColumn",(function(){return S.DiscoverGridSettingsColumn}));var n=r(0),i=r.n(n),s=r(3),a=r(4),o=r.n(a),c=r(20),d=r(14),u=r(23),l=r(7);class doc_views_registry_DocViewsRegistry{constructor(){i()(this,"docViews",[])}addDocView(e){const t="function"==typeof e?e():e;"function"!=typeof t.shouldShow&&(t.shouldShow=()=>!0),this.docViews.push(t)}getDocViewsSorted(e){return this.docViews.filter((t=>t.shouldShow(e))).sort(((e,t)=>Number(e.order)>Number(t.order)?1:-1))}}var p=r(6),f=r(9),_=r(2);const b=Object(f.memoize)((function(e,t,r,n){var i;const{usageCollection:s}=t,a=new _.Storage(localStorage);return{application:e.application,addBasePath:e.http.basePath.prepend,capabilities:e.application.capabilities,chrome:e.chrome,core:e,data:t.data,docLinks:e.docLinks,embeddable:t.embeddable,theme:t.charts.theme,fieldFormats:t.fieldFormats,filterManager:t.data.query.filterManager,history:p.c,dataViews:t.data.dataViews,inspector:t.inspector,metadata:{branch:r.env.packageInfo.branch},navigation:t.navigation,share:t.share,urlForwarding:t.urlForwarding,timefilter:t.data.query.timefilter.timefilter,toastNotifications:e.notifications.toasts,notifications:e.notifications,uiSettings:e.uiSettings,storage:a,trackUiMetric:null==s?void 0:s.reportUiCounter.bind(s,"discover"),dataViewFieldEditor:t.dataViewFieldEditor,http:e.http,spaces:t.spaces,dataViewEditor:t.dataViewEditor,triggersActionsUi:t.triggersActionsUi,locator:n,expressions:t.expressions,charts:t.charts,savedObjectsTagging:null===(i=t.savedObjectsTaggingOss)||void 0===i?void 0:i.getTaggingApi(),savedObjectsManagement:t.savedObjectsManagement,unifiedSearch:t.unifiedSearch}}));var h=r(10),g=r(11),v=r(8),S=r(1);class search_embeddable_factory_SearchEmbeddableFactory{constructor(e,t){i()(this,"type",g.a),i()(this,"savedObjectMetaData",{name:s.i18n.translate("discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"}),type:"search",getIconForSavedObject:()=>"discoverApp"}),i()(this,"isEditable",(async()=>(await this.getStartServices()).isEditable())),i()(this,"createFromSavedObject",(async(e,t,n)=>{const i=await this.getDiscoverServices(),s=i.filterManager,a=Object(S.getSavedSearchUrl)(e),o=i.addBasePath(`/app/discover${a}`);try{const c=await Object(S.getSavedSearch)(e,{search:i.data.search,savedObjectsClient:i.core.savedObjects.client,spaces:i.spaces,savedObjectsTagging:i.savedObjectsTagging});await Object(S.throwErrorOnSavedSearchUrlConflict)(c);const d=c.searchSource.getField("index"),{executeTriggerActions:u}=await this.getStartServices(),{SavedSearchEmbeddable:l}=await Promise.all([r.e(0),r.e(2),r.e(9)]).then(r.bind(null,288));return new l({savedSearch:c,editUrl:o,editPath:a,filterManager:s,editable:i.capabilities.discover.save,indexPatterns:d?[d]:[],services:i},t,u,n)}catch(e){return console.error(e),new v.ErrorEmbeddable(e,t,n)}})),this.getStartServices=e,this.getDiscoverServices=t}canCreateNew(){return!1}getDisplayName(){return s.i18n.translate("discover.embeddable.search.displayName",{defaultMessage:"search"})}async create(e){return new v.ErrorEmbeddable("Saved searches can only be created from a saved object",e)}}var O=r(5);const y=({children:e})=>{const t=Object(a.useRef)(),[r,n]=Object(a.useState)(!1);return Object(a.useEffect)((()=>(t.current=window.setTimeout((()=>{n(!0)}),300),()=>{t.current&&clearTimeout(t.current)})),[]),r?Object(O.jsx)(o.a.Fragment,null,e):null},m="ACTION_VIEW_SAVED_SEARCH";class view_saved_search_action_ViewSavedSearchAction{constructor(e){i()(this,"id",m),i()(this,"type",m),this.application=e}async execute(e){const{embeddable:t}=e,r=t.getSavedSearch().id,n=Object(S.getSavedSearchUrl)(r),i=t?t.getOutput().editApp:void 0;await this.application.navigateToApp(i||"discover",{path:n})}getDisplayName(e){return s.i18n.translate("discover.savedSearchEmbeddable.action.viewSavedSearch.displayName",{defaultMessage:"Open in Discover"})}getIconType(e){return"inspect"}async isCompatible(e){const{embeddable:t}=e,{capabilities:r}=this.application,n=r.discover.show||r.discover.save;return Boolean(t.type===l.SEARCH_EMBEDDABLE_TYPE&&t.getInput().viewMode===v.ViewMode.VIEW&&n)}}var w=r(12),j=r.n(w),E=r(21),D=r(13);const P=j()({key:"truncation"});var T=r(18),x=r(15),k=r(16);const[A,C]=Object(_.createGetterSetter)("urlTrackingEnabled"),I=o.a.lazy((()=>Promise.all([r.e(1),r.e(8)]).then(r.bind(null,287)))),M=o.a.lazy((()=>Promise.all([r.e(1),r.e(7)]).then(r.bind(null,289)))),U=o.a.lazy((()=>r.e(6).then(r.bind(null,290))));class plugin_DiscoverPlugin{constructor(e){i()(this,"appStateUpdater",new c.BehaviorSubject((()=>({})))),i()(this,"docViewsRegistry",null),i()(this,"stopUrlTracking",void 0),i()(this,"locator",void 0),this.initializerContext=e}setup(e,t){const n=e.http.basePath.prepend("/app/discover"),i=this.initializerContext.env.mode.dev;t.share&&(this.locator=t.share.url.locators.create(new h.b({useHash:e.uiSettings.get("state:storeInSessionStorage")}))),this.docViewsRegistry=new doc_views_registry_DocViewsRegistry,Object(p.g)(this.docViewsRegistry),this.docViewsRegistry.addDocView({title:s.i18n.translate("discover.docViews.table.tableTitle",{defaultMessage:"Table"}),order:10,component:e=>{const t=Object(T.a)().uiSettings.get(l.DOC_TABLE_LEGACY)?I:M;return Object(O.jsx)(o.a.Suspense,{fallback:Object(O.jsx)(y,null,Object(O.jsx)(d.EuiLoadingContent,null))},Object(O.jsx)(t,e))}}),this.docViewsRegistry.addDocView({title:s.i18n.translate("discover.docViews.json.jsonTitle",{defaultMessage:"JSON"}),order:20,component:({hit:e,dataView:t})=>Object(O.jsx)(o.a.Suspense,{fallback:Object(O.jsx)(y,null,Object(O.jsx)(d.EuiLoadingContent,null))},Object(O.jsx)(U,{index:e.raw._index,id:e.raw._id,dataView:t,hasLineNumbers:!0}))});const{setTrackedUrl:a,restorePreviousUrl:c,stopUrlTracker:f,appMounted:g,appUnMounted:v,setTrackingEnabled:S}=function(e,t,n,i){C({enabled:!0});const{appMounted:s,appUnMounted:a,stop:o,setActiveUrl:c,restorePreviousUrl:d}=Object(_.createKbnUrlTracker)({getHistory:p.d,baseUrl:e,defaultSubUrl:"#/",storageKey:`lastUrl:${t.http.basePath.get()}:discover`,navLinkUpdater$:n,toastNotifications:t.notifications.toasts,stateParams:[{kbnUrlKey:"_g",stateUpdate$:i.data.query.state$.pipe(Object(x.filter)((({changes:e})=>!!(e.globalFilters||e.time||e.refreshInterval))),Object(x.map)((async({state:e})=>{var t;const{isFilterPinned:n}=await r.e(0).then(r.bind(null,43));return{...e,filters:null===(t=e.filters)||void 0===t?void 0:t.filter(n)}})))}],shouldTrackUrlUpdate:()=>A().enabled,onBeforeNavLinkSaved:e=>(e.includes(k.a)&&(e=Object(_.replaceUrlHashQuery)(e,(e=>(delete e[k.a],e)))),e)});return{appMounted:s,appUnMounted:a,stopUrlTracker:o,setTrackedUrl:c,restorePreviousUrl:d,setTrackingEnabled:e=>{C({enabled:e})}}}(n,e,this.appStateUpdater,t);return Object(p.k)({setTrackedUrl:a,restorePreviousUrl:c,setTrackingEnabled:S}),this.stopUrlTracking=()=>{f()},e.application.register({id:l.PLUGIN_ID,title:"Discover",updater$:this.appStateUpdater.asObservable(),order:1e3,euiIconType:"logoKibana",defaultPath:"#/",category:u.DEFAULT_APP_CATEGORIES.kibana,mount:async t=>{const[n,s]=await e.getStartServices();Object(p.i)(t.history),Object(p.h)(t.setHeaderActionMenu),Object(p.l)(),g();const a=t.history.location.state,o=t.history.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))})),c=b(n,s,this.initializerContext,this.locator);await s.data.indexPatterns.clearCache();const{renderApp:d}=await Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(5)]).then(r.bind(null,286));t.element.classList.add("dscAppWrapper");const u=d(t.element,c,i,a);return()=>{o(),u(),v()}}}),t.urlForwarding.forwardApp("doc","discover",(e=>`#${e}`)),t.urlForwarding.forwardApp("context","discover",(e=>{const t=e.split("/");return t[4]?`#${[...t.slice(0,3),...t.slice(4)].join("/")}`:`#${e}`})),t.urlForwarding.forwardApp("discover","discover",(e=>{const[,t,r]=/discover\/([^\?]+)(.*)/.exec(e)||[];return t?`#/view/${t}${r||""}`:`#${e.replace("/discover","")||"/"}`})),t.home&&t.home.featureCatalogue.register({id:"discover",title:s.i18n.translate("discover.discoverTitle",{defaultMessage:"Discover"}),subtitle:s.i18n.translate("discover.discoverSubtitle",{defaultMessage:"Search and find insights."}),description:s.i18n.translate("discover.discoverDescription",{defaultMessage:"Interactively explore your data by querying and filtering raw documents."}),icon:"discoverApp",path:"/app/discover#/",showOnHomePage:!1,category:"data",solutionId:"kibana",order:200}),this.registerEmbeddable(e,t),{docViews:{addDocView:this.docViewsRegistry.addDocView.bind(this.docViewsRegistry)},locator:this.locator}}start(e,t){const{uiActions:r}=t,n=new view_saved_search_action_ViewSavedSearchAction(e.application);return r.addTriggerAction("CONTEXT_MENU_TRIGGER",n),Object(p.j)(t.uiActions),(e=>{const t=Object(D.serializeStyles)((e=>e?[`\n    .dscTruncateByHeight {\n      overflow: hidden;\n      max-height: ${e}px !important;\n    }\n    .dscTruncateByHeight:before {\n      top: ${e-15}px;\n    }\n  `]:["\n    .dscTruncateByHeight {\n      max-height: none;\n    }"])(e),E.cache.registered);P.inserted[t.name]||P.insert("",t,P.sheet,!0)})(e.uiSettings.get(l.TRUNCATE_MAX_HEIGHT)),{locator:this.locator}}stop(){this.stopUrlTracking&&this.stopUrlTracking()}registerEmbeddable(e,t){const r=new search_embeddable_factory_SearchEmbeddableFactory((async()=>{const[t,r]=await e.getStartServices();return{executeTriggerActions:r.uiActions.executeTriggerActions,isEditable:()=>t.application.capabilities.discover.save}}),(async()=>{const[t,r]=await e.getStartServices();return b(t,r,this.initializerContext,this.locator)}));t.embeddable.registerEmbeddableFactory(r.type,r)}}async function R(){return await Promise.all([r.e(0),r.e(3),r.e(10)]).then(r.bind(null,265))}function L(e){return new plugin_DiscoverPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},,function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t){e.exports=__kbnSharedDeps__.RisonNode},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.LodashFp},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedFieldList/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjectsFinder/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}]);