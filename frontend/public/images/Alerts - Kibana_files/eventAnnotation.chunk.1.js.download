(window.eventAnnotation_bundle_jsonpfunction=window.eventAnnotation_bundle_jsonpfunction||[]).push([[1],{15:function(n,t,e){"use strict";e.r(t),e.d(t,"hasIcon",(function(){return l})),e.d(t,"getEventAnnotationService",(function(){return s}));var i=e(4),o=e(1),a=e(3);function l(n){return null!=n&&"empty"!==n}function s(){const n=n=>{const t=n.filter((({isHidden:n})=>!n)),[e,s]=Object(i.partition)(t,a.e),r=[];for(const n of s)if(Object(a.f)(n)){const{label:t,color:e,key:i,outside:o,id:l}=n,{timestamp:s,endTimestamp:c}=i;r.push({type:"expression",chain:[{type:"function",function:"manual_range_event_annotation",arguments:{id:[l],time:[s],endTime:[c],label:[t||a.b],color:[e||a.c],outside:[Boolean(o)]}}]})}else{const{label:t,color:e,lineStyle:i,lineWidth:o,icon:s,key:c,textVisibility:u,id:d}=n;r.push({type:"expression",chain:[{type:"function",function:"manual_point_event_annotation",arguments:{id:[d],time:[c.timestamp],label:[t||a.b],color:[e||a.a],lineWidth:[o||1],lineStyle:[i||"solid"],icon:l(s)?[s]:["triangle"],textVisibility:[u||!1]}}]})}for(const n of e){const{id:t,label:e,color:i,lineStyle:s,lineWidth:c,icon:u,timeField:d,textVisibility:p,textField:f,filter:y,extraFields:m,ignoreGlobalFilters:b}=n;r.push({type:"expression",chain:[{type:"function",function:"query_point_event_annotation",arguments:{id:[t],timeField:d?[d]:[],label:[e||a.b],color:[i||a.a],lineWidth:[c||1],lineStyle:[s||"solid"],icon:l(u)?[u]:["triangle"],textVisibility:[p||!1],textField:p&&f?[f]:[],filter:y?[Object(o.queryToAst)(y)]:[],extraFields:m||[],ignoreGlobalFilters:[Boolean(b)]}}]})}return r};return{toExpression:n,toFetchExpression:({interval:t,groups:e})=>0===e.length?[]:[{type:"expression",chain:[{type:"function",function:"kibana",arguments:{}},{type:"function",function:"fetch_event_annotations",arguments:{interval:[t],groups:[...e.filter((n=>n.annotations.some((n=>!n.isHidden)))).map((({annotations:t,indexPatternId:e})=>({type:"expression",chain:[{type:"function",function:"event_annotation_group",arguments:{dataView:[{type:"expression",chain:[{type:"function",function:"indexPatternLoad",arguments:{id:[e]}}]}],annotations:[...n(t)]}}]})))]}}]}]}}}}]);