/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[6,16],{109:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var r,a=n(0),o=n.n(a),i=n(71),s=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c="html",u="svg",l=function(t,e){var n,r,a,o={};if(t===c)a=document.createElement("div");else{if(t!==u)throw new Error('Invalid element type "'+t+'" for createPortalNode: must be "html" or "svg".');a=document.createElementNS("http://www.w3.org/2000/svg","g")}if(e&&"object"==typeof e)for(var i=0,s=Object.entries(e.attributes);i<s.length;i++){var l=s[i],d=l[0],p=l[1];a.setAttribute(d,p)}var h={element:a,elementType:t,setPortalProps:function(t){o=t},getInitialPortalProps:function(){return o},mount:function(e,a){if(a!==r){if(h.unmount(),e!==n&&!function(t,e){if(e===c)return t instanceof HTMLElement;if(e===u)return t instanceof SVGElement;throw new Error('Unrecognized element type "'+e+'" for validateElementType.')}(e,t))throw new Error('Invalid element type for portal: "'+t+'" portalNodes must be used with '+t+" elements, but OutPortal is within <"+e.tagName+">.");e.replaceChild(h.element,a),n=e,r=a}},unmount:function(t){t&&t!==r||n&&r&&(n.replaceChild(r,h.element),n=void 0,r=void 0)}};return h},d=function(t){function e(e){var n=t.call(this,e)||this;return n.addPropsChannel=function(){Object.assign(n.props.node,{setPortalProps:function(t){n.setState({nodeProps:t})}})},n.state={nodeProps:n.props.node.getInitialPortalProps()},n}return s(e,t),e.prototype.componentDidMount=function(){this.addPropsChannel()},e.prototype.componentDidUpdate=function(){this.addPropsChannel()},e.prototype.render=function(){var t=this,e=this.props,n=e.children,r=e.node;return i.createPortal(a.Children.map(n,(function(e){return a.isValidElement(e)?a.cloneElement(e,t.state.nodeProps):e})),r.element)},e}(a.PureComponent),p=function(t){function e(e){var n=t.call(this,e)||this;return n.placeholderNode=a.createRef(),n.passPropsThroughPortal(),n}return s(e,t),e.prototype.passPropsThroughPortal=function(){var t=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(t)},e.prototype.componentDidMount=function(){var t=this.props.node;this.currentPortalNode=t;var e=this.placeholderNode.current,n=e.parentNode;t.mount(n,e),this.passPropsThroughPortal()},e.prototype.componentDidUpdate=function(){var t=this.props.node;this.currentPortalNode&&t!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=t);var e=this.placeholderNode.current,n=e.parentNode;t.mount(n,e),this.passPropsThroughPortal()},e.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},e.prototype.render=function(){return a.createElement("div",{ref:this.placeholderNode})},e}(a.PureComponent),h=l.bind(null,c),f=(l.bind(null,u),n(6));function v({children:t,setHeaderActionMenu:e,theme$:n}){const r=Object(a.useMemo)((()=>h()),[]);return Object(a.useEffect)((()=>(e((t=>Object(f.toMountPoint)(o.a.createElement(p,{node:r}),{theme$:n})(t))),()=>{r.unmount(),e(void 0)})),[r,e,n]),o.a.createElement(d,{node:r},t)}},110:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return v}));var r=n(19),a=n(0),o=n.n(a),i=n(14),s=n(74),c=n(6),u=n(25),l=n(16),d=n(92);const p=["apm","uptime","logs","infrastructure","alerts"],h=Object(a.createContext)({}),f=["apm","synthetics","infra_logs","infra_metrics","ux","alert"];function v({children:t}){const{http:e}=Object(c.useKibana)().services,[n,v]=Object(a.useState)(""),{absoluteStart:b,absoluteEnd:m}=Object(d.a)(),[y,O]=Object(a.useState)({}),j=Object(i.useRouteMatch)("/exploratory-view");Object(a.useEffect)((()=>{j||Object(s.asyncForEach)(f,(async t=>{var e,n,r,a,o;try{const i=({hasData:e,indices:n,serviceName:r})=>{O((a=>({...a,[t]:{hasData:e,...r?{serviceName:r}:{},...n?{indices:n}:{},status:l.a.SUCCESS}})))};switch(t){case"ux":const s={absoluteTime:{start:b,end:m}},c=await(null===(e=Object(u.a)(t))||void 0===e?void 0:e.hasData(s));i({hasData:null==c?void 0:c.hasData,indices:null==c?void 0:c.indices,serviceName:null==c?void 0:c.serviceName});break;case"synthetics":const l=await(null===(n=Object(u.a)(t))||void 0===n?void 0:n.hasData());i({hasData:null==l?void 0:l.hasData,indices:null==l?void 0:l.indices});break;case"apm":const d=await(null===(r=Object(u.a)(t))||void 0===r?void 0:r.hasData());i({hasData:null==d?void 0:d.hasData,indices:null==d?void 0:d.indices});break;case"infra_logs":const p=await(null===(a=Object(u.a)(t))||void 0===a?void 0:a.hasData());i({hasData:null==p?void 0:p.hasData,indices:null==p?void 0:p.indices});break;case"infra_metrics":const h=await(null===(o=Object(u.a)(t))||void 0===o?void 0:o.hasData());i({hasData:null==h?void 0:h.hasData,indices:null==h?void 0:h.indices})}}catch(e){O((e=>({...e,[t]:{hasData:void 0,status:l.a.FAILURE}})))}}))}),[j]),Object(a.useEffect)((()=>{!async function(){try{const t=await async function({http:t}){try{const{data:e=[]}=await t.get("/api/alerts/_find",{query:{page:1,per_page:20}})||{};return e.filter((({consumer:t})=>p.includes(t)))}catch(t){throw console.error("Error while fetching alerts",t),t}}({http:e});O((e=>({...e,alert:{hasData:t.length>0,status:l.a.SUCCESS}})))}catch(t){O((t=>({...t,alert:{hasData:void 0,status:l.a.FAILURE}})))}}()}),[n,e]);const P=f.every((t=>{var e;const n=null===(e=y[t])||void 0===e?void 0:e.status;return void 0!==n&&n!==l.a.LOADING})),g=Object.keys(y).some((t=>{var e;return!0===(null===(e=y[t])||void 0===e?void 0:e.hasData)}));return o.a.createElement(h.Provider,{value:{hasDataMap:y,hasAnyData:Object(r.isEmpty)(y)?void 0:g,isAllRequestsComplete:P,forceUpdate:n,onRefreshTimeRange:()=>{v(Object(r.uniqueId)())}},children:t})}},211:function(t,e,n){"use strict";n.r(e),n.d(e,"getO11yAlertsTableConfiguration",(function(){return b}));var r=n(87),a=n(10),o=n(142),i=n(157),s=n(104),c=n(141),u=n(128),l=n(0),d=n.n(l),p=n(159);const h=t=>Object.entries(t).reduce(((t,[e,n])=>[...t,{field:e,value:n}]),[]),f=()=>[],v=(t,e)=>()=>({renderCustomActionsRow:(n,r,a)=>d.a.createElement(p.a,{data:h(n),eventId:n._id,ecsData:{_id:n._id,_index:n._index},id:a,observabilityRuleTypeRegistry:t,setEventsDeleted:f,setFlyoutAlert:r,config:e}),width:120}),b=(t,e)=>({id:a.observabilityFeatureId,casesFeatureId:a.casesFeatureId,columns:u.a.map(c.a),getRenderCellValue:({setFlyoutAlert:e})=>Object(s.b)({observabilityRuleTypeRegistry:t,setFlyoutAlert:e}),sort:[{[r.Y]:{order:"desc"}}],useActionsColumn:v(t,e),useBulkActions:o.a,useInternalFlyout:()=>{const{header:e,body:n,footer:r}=Object(i.b)(t);return{header:e,body:n,footer:r}}})},86:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),a=n(99);function o(){return Object(r.useContext)(a.a)}},89:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),a=n(110);function o(){return Object(r.useContext)(a.a)}},92:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),a=n(45);function o(){return Object(r.useContext)(a.a)}},96:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),a=n(41),o=n(10);function i(){const[t,e]=Object(r.useState)({all:!1,read:!1,create:!1,update:!1,delete:!1,push:!1}),n=Object(a.a)().services.application.capabilities,i=Object(a.a)().services.cases.helpers.getUICapabilities(n[o.casesFeatureId]);return Object(r.useEffect)((()=>{e({all:i.all,create:i.create,read:i.read,update:i.update,delete:i.delete,push:i.push})}),[i.all,i.create,i.read,i.update,i.delete,i.push]),t}},99:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);const a=Object(r.createContext)({})}}]);