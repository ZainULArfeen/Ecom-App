!function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=4)}([function(e,r,t){"use strict";t.r(r),t.d(r,"getSavedSearchUrl",(function(){return n})),t.d(r,"getSavedSearchFullPathUrl",(function(){return a}));const n=e=>e?`#/view/${encodeURIComponent(e)}`:"#/",a=e=>`/app/discover${n(e)}`},function(e,r,t){t.r(r);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(n))},function(e,r,t){t.r(r);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(n))},function(e,r){e.exports=__kbnSharedDeps__.KbnI18n},function(e,r,t){t(5),__kbnBundles__.define("plugin/savedSearch/public",t,6),__kbnBundles__.define("plugin/savedSearch/common",t,0)},function(e,r,t){t.p=window.__kbnPublicPath__.savedSearch},function(e,r,t){"use strict";t.r(r),t.d(r,"getSavedSearch",(function(){return l})),t.d(r,"getSavedSearchFullPathUrl",(function(){return s.getSavedSearchFullPathUrl})),t.d(r,"getSavedSearchUrl",(function(){return s.getSavedSearchUrl})),t.d(r,"getSavedSearchUrlConflictMessage",(function(){return c})),t.d(r,"throwErrorOnSavedSearchUrlConflict",(function(){return u})),t.d(r,"saveSavedSearch",(function(){return v})),t.d(r,"VIEW_MODE",(function(){return g})),t.d(r,"plugin",(function(){return f}));var n=t(1),a=t(2);const i="search";var o=t(3),s=t(0);const c=async e=>{var r;return o.i18n.translate("savedSearch.legacyURLConflict.errorMessage",{defaultMessage:"This search has the same URL as a legacy alias. Disable the alias to resolve this error : {json}",values:{json:null===(r=e.sharingSavedObjectProps)||void 0===r?void 0:r.errorJSON}})},u=async e=>{var r;if(null!==(r=e.sharingSavedObjectProps)&&void 0!==r&&r.errorJSON)throw new Error(await c(e))},d=(e,r)=>{var t,n,a,i,o,s,c,u;return{kibanaSavedObjectMeta:{searchSourceJSON:r},title:null!==(t=e.title)&&void 0!==t?t:"",sort:null!==(n=e.sort)&&void 0!==n?n:[],columns:null!==(a=e.columns)&&void 0!==a?a:[],description:null!==(i=e.description)&&void 0!==i?i:"",grid:null!==(o=e.grid)&&void 0!==o?o:{},hideChart:null!==(s=e.hideChart)&&void 0!==s&&s,viewMode:e.viewMode,hideAggregatedPreview:e.hideAggregatedPreview,rowHeight:e.rowHeight,isTextBasedQuery:null!==(c=e.isTextBasedQuery)&&void 0!==c&&c,timeRestore:null!==(u=e.timeRestore)&&void 0!==u&&u,timeRange:e.timeRange,refreshInterval:e.refreshInterval,rowsPerPage:e.rowsPerPage}},l=async(e,r)=>e?(async(e,{search:r,savedObjectsClient:t,spaces:o,savedObjectsTagging:s})=>{var c,u;const d=await t.resolve(i,e);if(!d.saved_object||d.saved_object.error)throw new a.SavedObjectNotFound(i,e);const l=d.saved_object,v=Object(n.parseSearchSourceJSON)(null!==(c=null===(u=l.attributes.kibanaSavedObjectMeta)||void 0===u?void 0:u.searchSourceJSON)&&void 0!==c?c:"{}"),g=Object(n.injectSearchSourceReferences)(v,l.references),f=s?s.ui.getTagIdsFromReferences(l.references):void 0;return((e,r,t,n,a)=>({id:e,searchSource:n,sharingSavedObjectProps:a,title:r.title,sort:r.sort,columns:r.columns,description:r.description,tags:t,grid:r.grid,hideChart:r.hideChart,viewMode:r.viewMode,hideAggregatedPreview:r.hideAggregatedPreview,rowHeight:r.rowHeight,isTextBasedQuery:r.isTextBasedQuery,timeRestore:r.timeRestore,timeRange:r.timeRange,refreshInterval:r.refreshInterval,rowsPerPage:r.rowsPerPage}))(e,l.attributes,f,await r.searchSource.create(g),{outcome:d.outcome,aliasTargetId:d.alias_target_id,aliasPurpose:d.alias_purpose,errorJSON:"conflict"===d.outcome&&o?JSON.stringify({targetType:i,sourceId:e,targetSpace:(await o.getActiveSpace()).id}):void 0})})(e,r):(({search:e})=>({searchSource:e.searchSource.createEmpty()}))(r),v=async(e,r,t,n)=>{var a;const o=r.copyOnSave||!e.id;if(e.title&&o&&!r.isTitleDuplicateConfirmed&&r.onTitleDuplicate&&await(async(e,r)=>{if(e)return(await r.find({type:i,perPage:10,search:`"${e}"`,searchFields:["title"],fields:["title"]})).savedObjects.some((r=>r.get("title").toLowerCase()===e.toLowerCase()))})(e.title,t))return void r.onTitleDuplicate();const{searchSourceJSON:s,references:c}=e.searchSource.serialize(),u=n?n.ui.updateTagsReferences(c,null!==(a=e.tags)&&void 0!==a?a:[]):c,l=o?await t.create(i,d(e,s),{references:u}):await t.update(i,e.id,d(e,s),{references:u});return null==l?void 0:l.id};let g;function f(){return{setup:()=>{},start:()=>{}}}!function(e){e.DOCUMENT_LEVEL="documents",e.AGGREGATED_LEVEL="aggregated"}(g||(g={}))}]);